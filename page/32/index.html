<!DOCTYPE html>
<html>
    <head>
        <title>Home &mdash; @TheKeyboard &mdash; The ramblings of a grumpy programmer</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="/components/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
        <link href="/components/bootstrap/css/bootstrap-responsive.min.css" rel="stylesheet" type="text/css" />
        <link href="/css/style.css" rel="stylesheet" type="text/css" />
        <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
        <!--[if lt IE 9]>
            <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
        <link rel="stylesheet" href="/components/highlightjs/styles/github.css" />
        <link rel="alternate" type="application/atom+xml" href="/atom.xml" title="@TheKeyboard activity feed" />
        <link href="https://vjs.zencdn.net/5.5.3/video-js.css" rel="stylesheet">
        <script src="https://vjs.zencdn.net/ie8/1.1.1/videojs-ie8.min.js"></script>
        <style>
        /** quick fix because bootstrap <pre> has a background-color. */
        pre code { background-color: inherit; }
        </style>
    </head>
    <body>
        <header>
            <div class="navbar navbar-inverse navbar-fixed-top">
                <div class="navbar-inner">
                    <div class="container-fluid">
                        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </a>
                        <a class="brand" href="/">@TheKeyboard</a>
                        <div class="nav-collapse collapse">
                            <ul class="nav">
                                <li><a href="/blog">Posts Archive</a></li>
                                <li><a href="/about">About</a></li>
                                <li><a href="/atom.xml">RSS/Atom</a></li>
                            </ul>
                        </div><!--/.nav-collapse -->
                    </div>
                </div>
            </div>
        </header>
        <div class="mainContent container">
            <div class="row-fluid">
                <div class="span8">
                        <article>
        <header>
            <h2><a href="/2011/09/07/renovating-sucks/">Renovating Sucks</a></h2>
           <h3>September 7th, 2011</h3>
        </header>
        <div>
            <p>My apologies for the big mess here. As some of you who follow me on twitter might
be away, I accidentally blew away all the source for this blog while trying to fix
a syntax highlighting problem with some older posts. I thought I had a back-up of
the source on my external drive but it turns out that I was not telling it to
back up my home directory, for whatever reason. How awkward.</p>

<p>Luckily I sill had the dump of data from my old WordPress blog in a database so
since I was still going to use Jekyll, I used one of the provided converters and
got back to work. I was still missing 13 posts though. Those were fairly easy to
recover thanks to the awesomeness that is <a href="https://github.com/jgm/pandoc">Pandoc</a>. What is
Pandoc? It bills itself as a "universal file converter" and it does a pretty
good job. I used it to convert those old posts in HTML format into Markdown. Now that I had
all my posts (stretching back to October of 2005) it was time to renovate.</p>

<p>I'm not using just Jekyll. I decided to use <a href="http://octopress.org">Octopress</a>, which
is a suite of tools written in Ruby that sit on top of Jekyll. I edit my posts in Markdown 
as usual, and then it's "rake generate &amp;&amp; rake deploy" to make new posts. Of course, it 
wasn't quite that simple but that is the basic version of it.</p>

<p>(Edit: I previously had said I was going to drop comments from the blog but because I kept the same URL structure, the Disqus plugin
for Octopress was able to easily find them. Another small victory for Octopress)</p>

<p>Finally I apologize to people who are reading my feed if I have just blasted them with 800+ posts
due to me setting the blog up again.</p>

<p>Anyway, I'm back and expect the info to start flowing again.</p>

        </div>
            </article>
    <article>
        <header>
            <h2><a href="/2011/08/09/a-day-in-the-life-at-moontoast/">A Day in the Life At Moontoast</a></h2>
           <h3>August 9th, 2011</h3>
        </header>
        <div>
            <p>I had jokingly asked on Twitter for topics for blog posts for this
week, planning on blogging something last night too, but I ran out
of time before I headed out to play softball. Let's here it for
dedication to task! <a href="http://twitter.com/elazar">Matthew Turland</a>
had suggested I talk about the day in the life of your grumpy
programmer at <a href="http://www.moontoast.com">Moontast</a>. Not missing an
opportunity to be a smartass, I asked Matthew if he really wanted
to know before <a href="http://twitter.com/ramsey">my boss</a> piped up that
it involved lots of "blood, sweat and swear". Thanks to
<a href="http://terrychay.com/">Terry Chay</a> for that awesome quote.</p>

<p>Given that Moontoast is
<a href="http://www.moontoast.com/company/jobs">currently hiring</a> some PHP
developers (ahem, Server Side Engineers) to either work in our
offices in Nashville, Boston or remotely in North America, perhaps
this is a very timely post. Don't worry, I'm not going to reveal
any trade secrets or ask you to peer review the code I've written.
I'll save that punishment for those folks we actually hire.
Instead, I want to focus a bit on work flow and our
infrastructure.</p>

<p>With most of the team in Nashville, that means they are on Central
time. Since I'm in the Eastern timezone, that gives me the first
hour of the day to focus on planning my day. Yes, I'm sure you
shocked that I actually make notes and try to plan ahead of time
the things I want to work on that day. Lately I've been working on
a SOAP-powered API. Don't worry, I can hear you snickering while
you read that. It's meant to be compatible with
<a href="http://www.magentocommerce.com/wiki/doc/webservices-api/api/">Magento's</a>
for strategic business purposes.</p>

<p>As part of my tasks I also identify who on the team I need to speak
to if they are a potential block. Being a remote worker means that
communication is incredibly important, and quick turnaround time is
essential to avoid me sitting in my basement wasting my time. With
my list of potential targets for my anger secured, I connect to the
dev environment I'll be using and start coding away.</p>

<p>At Moontoast all our stuff is up in the cloud. EC2, S3, ELB, MySQL
on RDS and MongoHQ. My two dev environments are up there too, so I
spend pretty much all day using Vim. I did try using
<a href="http://expandrive.com">Expandrive</a> to mount remote directories and
then edit things via MacVim (as I do prefer it) but I found that it
was impossible to use my most essential
<a href="https://wincent.com/products/command-t">Vim plugin</a> to find the
files I needed to work on. So I instead duplicated my Vim setup on
my two dev instances and away I go.</p>

<p>I end up learning a lot of devops stuff while I build the
applications. Specifically learning how to make all the different
pieces talk nicely to each other, and then creating configurations
that allow me to pull in data for testing purposes from pretty much
any environment we are using. If you have not learned the power of
tunnelling database connections over SSH you have missed out on
some powerful tools.</p>

<p>We also use Git for our version control. It took me a few months to
get comfortable using it (still run into the odd problem but they
are fixable with a little research or swearing until someone helps)
and I think I'm okay with it now. I don't do anything fancy like
cherry-picking commits to build artisanal pushes that are a thing
of beauty. We keep things simple and stick to
<a href="http://nvie.com/posts/a-successful-git-branching-model/">this workflow</a>,
with the added change of using a stage branch.</p>

<p>Oh, and if that wasn't confusing enough, the two different products
we have use two different branching structures. Fixing that AND
getting rid of the stage branch are high on the list of system
integration tasks I want to do. That and fixing our current
deployment system.</p>

<p>Right now we use something that is actually quite awesome called
<a href="https://github.com/flogic/whiskey_disk">Whiskey Disk</a>, a tool that
(almost) delivers on the promise of "embarrassingly fast
deployments". I do like it but I feel that we're moving to a system
that needs to be more tailored to my goals of continuous delivery
of code. We have a cron job setup that monitors for changes to
several branches, and then triggers a deployment if it notices a
change. It <em>is</em> cool, but I would prefer some more control.
Sometimes I feel like waiting 10 minutes for changes to show up is
unacceptable. Some of my objections are also of a philosophical
nature. They are doing deploys using in-place updates of code
instead of copying code into a directory, swapping symlinks, and
then flushing the opcode cache. A minor detail to some, but if you
start relying on pieces like this you really need to do it right.</p>

<p>Magical deployments is cool, but I feel like we are moving towards
a scenario where we need more control of what gets deployed where.
One thing I do like is the concept of separate repositories for the
application and the config files for the application, allowing for
pushing just config changes out instead of the whole app. I find it
handy, but again, I have a desire for more control on what goes
where. My perfect tool is a cross between
<a href="https://github.com/rlerdorf/WePloy">WePloy</a> and the
recently-released
<a href="https://github.com/etsy/deployinator">Deployinator</a>. Etsy's tool
looks the closest to what I like, but we shall see. Something in
PHP is more comfortable as Deployinator is a Sinatra app and my
Ruby is WAY out of date.</p>

<p>So, when I work I am either doing coding in a 'hotfix' branch to
fix a bug or a 'feature' branch when creating new things. For
example, my SOAP API work is in the 'feature-api' branch. I commit
my stuff often, usually after I've tested stuff out (more on that
later) and I also push to my branch quite often as well. Mostly
because it provides proof to the team that I am working on stuff as
all pushes are tracked and a bot emails the dev team AND posts a
message in our IRC channel that code has been pushed.</p>

<p>You notice I talked about tests. The amount of tests we have on
what is a fairly complex set of products is appallingly low. I do
feel shame, and while building the API I've been using
<a href="http://www.phpspec.net/">PHPSpec</a> as the testing tool. While I've
been a big believer in unit testing in the past, it seems to me
that a Behaviour Driven Development approach is likely to achieve
better results overall. BDD lets me talk to our product managers
and very easily convert their criteria for a feature successfully
working into tests. I'm in the early days of PHPSpec and BDD so I'm
sure I'll have more thoughts on this in the future. Either way, the
time to commit to tests is now. I've been through the death march
of watching a team trying to write tests after the fact for a large
application. Not pretty.</p>

<p>To be perfectly honest, having good tests is like having
<a href="http://www.wikihow.com/Get-Six-Pack-Abs">six-pack abs</a> --
everybody wants them but nobody wants to do the work to get them.
Tests are the first step down the continuous delivery path, because
if you write tests then you can have the running of those tests
automated via continuous integration. I've spoken about CI before,
so I won't waste any more time on it.</p>

<p>So, I have code I'm writing in Git branches and are writing tests
for all new features I'm doing. Next step is to figure out how to
complement the work I'm doing with PHPSpec with the use of
<a href="http://cukes.info/">Cucumber</a> to let me test the rest of the site.
There are some challenges due to the use of Facebook Connect for
authentication, and heavy use of Ajax in the applications. They are
great from a user perspective, but a pain in the fucking ass to try
and write automated tests for. While Cucumber is aimed more at Ruby
folks, Cucumber is also able to test non-Ruby apps. Again, it will
be an uphill struggle but one that I think will pay off in allowing
increased delivery speed.</p>

<p>Now, we do have meetings every single day. We are using some
scrum-like system, but it basically boils down to talking to each
other for 5 to 10 minutes every day to go over what we're working
on to see if anyone needs help or to tell them if you're done early
and can tackle another problem. Yes, sometimes I get stuff done
ahead of schedule and then declare my desire to spend time on a
another task, usually something related to infrastructure work. Our
meetings are usually just before my lunch time, and often they
result in my slightly modifying what I'm working on in the day. I
have some lunch and then get back to work.</p>

<p>So there you have it: a day in my life at Moontoast. There are a
lot of cool challenges to make the whole infrastructure better, but
they are the type of challenges that I think will not kill you but
really make you stronger. Wish me luck!</p>

        </div>
            </article>
    <article>
        <header>
            <h2><a href="/2011/06/29/brain-dump/">Brain Dump for June 2011</a></h2>
           <h3>June 29th, 2011</h3>
        </header>
        <div>
            <p>Wow, it's been almost a month since I blogged anything. So I was
inspired to ask my twitter peeps to suggest some topics:</p>

<p>PHP legend Derick Rethans suggested I talk about
<a href="https://twitter.com/#!/derickr/statuses/86103879980302336">food</a>,
specifically biscuits. Well, I must confess, that I do love a good
biscuit. Every time I visit the US I always check to see if the
restaurant I'm in serves biscuits and gravy. Mmm, mmm, good.
Biscuits and gravy is something you just don't see on most Canadian
menus.</p>

<p>But all joking aside, I wanted to share some thoughts that have
been rattling around in my brain this past month.</p>

<p>PHP is undergoing what I think could only be described as a
personality crisis. First we had
<a href="http://www.xarg.org/2011/06/php-hacking/">a well-intentioned guy making a bunch of patches he did to PHP available</a>.
The reaction to this was predictable: the internals team responses
ranged from meh to outright dismissal due to his outsider status.
Predictably, users of PHP liked a lot of what he proposed. It's no
secret to those who have followed PHP internals, even sporadically,
that there is some dysfunction there. It's understandable: it's an
open source project without a real
<a href="http://en.wikipedia.org/wiki/BDFL">BDFL</a> and the goals and desires
of the internal PHP core team are very different from those, like
me, who just use the language and are not in a position to
contribute any meaningful changes at the implementation level.</p>

<p>Next we had the &#35;phpneeds meme that made the rounds on Twitter,
culminating in the boys at Orchestra.io putting together a page
<a href="http://phpneeds.orchestra.io/">outlining some of those requests</a>.
Again, much of what was being said there makes sense but the same
old friction came up: the people with the ideas they want to see
implemented are not in a position where they can implement them. My
C and C++ skills are non-existent (although I have hopes that Zed
Shaw's proposal to do "Learn C The Hard Way" sees the light of day)
so all I can do is complain about my inability to effect real
change to PHP.</p>

<p>I even made my own
<a href="http://twitter.com/#!/chartjes/status/83945075394088960">contribution to &#35;phpneeds</a>
that I thought now correctly puts PHP in the proper light: it is a
server-side solution that needs to decide if it wants to be bold or
meek. Look, I am not going to hash out all the old arguments here,
but I think there are some important issues to discuss. The big one
that I think gets ignored is that the core of PHP needs to decide
if PHP is going to continue to try and stay at the front of the
pack when it comes to it's suitability as a modern solution, or end
up like (don't hate me for saying this) Perl. By this I mean that
it's still a really good language, but it's been pushed aside and
left to those who either have to support legacy applications or is
being used by people who are strong enough to ignore the catcalls
from everyone else. Perl can still get the job done, but it's no
longer a consideration for anyone starting a new project...unless
they have many, many years of Perl experience and don't give a shit
about how it "looks" to be using a particular tool.</p>

<p>I'm not immune to this sort of thing either: I wish to branch out
and build applications using other languages and tools, but PHP is
the thing I know the best. I worry about the future: can I build
what I call Web Pi sites (Web 3.14159, get it?) full of real-time
information and distributed across multiple machines (cloud or
otherwise) using PHP as the server-side solution? What changes have
to occur at the bottom of the stack to keep PHP as a viable choice
for building web apps? Can I figure out how all this shit works so
I can actually build something like this?!?</p>

<p>PHP gets the job done, of that there is no doubt. Sometimes I yearn
for elegance in the languages I use, but then I realize it makes me
sound a lot like a whiny douchebag who hasn't shipped anything but
is quick to criticize other people's choices. I criticize my
choices all the time, whenever I find myself fighting the
components used to build the applications I work on. A good author
once said "write what you know" and for me that continues to be
PHP. Perhaps it's time to focus less on the language and more on
the problem you're trying to solve. I've taken to heart the concept
that the language you use for your application is simply an
implementation detail, because you can build shitty apps in any
number of languages. Because at some point it may be another
language that is the one that I know. Things change fast (says the
man looking warily at the marshalling forces of Node.js) so be
ready to make a paradigm shift when the time is right.</p>

<p>Which brings us back via rambling path to PHP. I think PHP 5.3
actually represented a large improvement for PHP itself: it
encouraged people who build things around PHP to re-examine what
they were doing and make things better. Witness all the new 5.3+
frameworks being built. Rather than being annoyed by there being
100+ PHP framework like I have in the past, I should look at this
as evidence of progress. I might never use one of those new
frameworks, but it's evidence that those who guide the future of
the language are trying to make things better. It may not be
happening at a pace that people are happy with, but it is
happening.</p>

<p>Now where did I put my copy of "Creating Web Pi Architectures"...</p>

        </div>
            </article>
    <nav>
        <a href="/page/31">Newer Posts</a><br />
        <a href="/page/33">Older Posts</a><br />
    </nav>
                </div>
                <div class="span4 sidebar">
                    <div class="well">
                        <h4>@TheKeyboard <small>The ramblings of a grumpy programmer</small></h4>
                    </div>
                    <div class="well sidebar-nav">
                        <section>
                            <h3>Find stuff</h3>
                            <script>
                              (function() {
                                var cx = '010269902375244482518:ddxhg1qhod4';
                                var gcse = document.createElement('script');
                                gcse.type = 'text/javascript';
                                gcse.async = true;
                                gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
                                    '//www.google.com/cse/cse.js?cx=' + cx;
                                var s = document.getElementsByTagName('script')[0];
                                s.parentNode.insertBefore(gcse, s);
                              })();
                            </script>
                            <gcse:searchbox-only></gcse:searchbox-only>
                        </section>
                        <section>
                            <h3>Contact me</h3>
                            <ul>
                                <li>Email me at chartjes@grumpy-learning.com</li>
                                <li>Find me on Twitter as <a href="https://twitter.com/grmpyprogrammer">@grmpyprogrammer</a></li>
                            </ul>
                        </section>
			<section>
				<h3>Sponsor me</h3>
				<p>If you like the work I do on <a href="https://github.com/opencfp/opencfp/">OpenCFP</a> you can become a
				sponsor via my <a href="https://github.com/sponsors/chartjes">GitHub sponsors</a> page. Your sponsorship
				allows me to spend more time on open source and less time writing books and training material.</p>
			</section>
                        <section>
                            <h3>Books</h3>
                            <ul>
				<li><a href="https://leanpub.com/grumpy-guide">The Grumpy Programmer's Guide To Testing PHP Applications (currently pre-ordering)</a></li>
                                <li><a href="https://leanpub.com/test-driven">Building Test-Driven Developers</a></li>
                                <li><a href="https://leanpub.com/minimumviabletests">Minimum Viable Tests</a></li>
                                <li><a href="https://leanpub.com/grumpy-phpunit">The Grumpy Programmer's PHPUnit Cookbook</a></li>
                            </ul>
                        </section>
                    </div>
                </div>
            </div>
        </div>
        <footer class="container">
            &copy; 2020 @TheKeyboard
        </footer>

        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="/components/jquery/jquery.min.js"><\/script>')</script>
        <script src="/components/bootstrap/js/bootstrap.min.js"></script>
                
                <script src="/components/highlightjs/highlight.pack.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
    </body>
</html>
