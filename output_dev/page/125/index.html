<!DOCTYPE html>
<html>
    <head>
        <title>Home &mdash; @TheKeyboard &mdash; The ramblings of a grumpy programmer</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="/components/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
        <link href="/components/bootstrap/css/bootstrap-responsive.min.css" rel="stylesheet" type="text/css" />
        <link href="/css/style.css" rel="stylesheet" type="text/css" />
        <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
        <!--[if lt IE 9]>
            <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
        <link rel="stylesheet" href="/components/highlightjs/styles/github.css" />
        <link rel="alternate" type="application/atom+xml" href="/atom.xml" title="@TheKeyboard activity feed" />
        <style>
        /** quick fix because bootstrap <pre> has a background-color. */
        pre code { background-color: inherit; }
        </style>
    </head>
    <body>
        <header>
            <div class="navbar navbar-inverse navbar-fixed-top">
                <div class="navbar-inner">
                    <div class="container-fluid">
                        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </a>
                        <a class="brand" href="/">@TheKeyboard</a>
                        <div class="nav-collapse collapse">
                            <ul class="nav">
                                <li><a href="/blog">Posts Archive</a></li>
                                <li><a href="/blog/categories">Categories</a></li>
                                <li><a href="/blog/tags">Tags</a></li>
                                <li><a href="/about">About</a></li>
                            </ul>
                        </div><!--/.nav-collapse -->
                    </div>
                </div>
            </div>
        </header>
        <div class="mainContent container">
            <div class="row-fluid">
                <div class="span8">
                        <article>
        <header>
            <h2><a href="/_posts/2010-02-04-sorting-relationship-results-in-doctrine-1-2-2.markdown"></a></h2>
        </header>
        <div>
            <hr />

<p>layout: post</p>

<h2>title: Sorting Relationship Results In Doctrine 1.2</h2>

<p>
I've been building an admin panel for a work project dealing with fantasy sports, and one of the failings of the old version of the overall application was that, well, sometimes it didn't retain the desired display order of players grouped by position.  Sometimes it worked, sometimes it didn't.  A classic case of "software working by accident" maybe?  So I've set out to fix that part of it.
</p>

<p>
I've been using <a href="http://www.doctrine-project.org">Doctrine</a> 1.2 for the project (integrated with <a href="http://framework.zend.com">Zend Framework</a>), and I found it quite easy to setup the relationships I needed between my models.  Oh, except for finding out that I really needed a field called 'id' in one table in order to make a relationship work properly.  Sometimes convention triumphs over configuration. ;)
So I thought to myself "I wonder if I can configure things so that when we're pulling in the related results, it is sorted?"
</p>

<p>
So I started digging around via search engine.  Took me about an hour to find the solution.  First, it took me half the time to dive deep enough to find out WHERE I can define the default sort order.  Surprisingly, it was in an area that made total sense but I could not find before.  Weird.  Probably due to me not fulling understanding the API.
</p>

<pre><code>class Team extends Doctrine_Record 
{
    public function setUp() 
    {
                ...

        $this-&gt;hasMany('Player as Players', array(
            'local' =&gt; 'team_id',
            'foreign' =&gt; 'player_id',
            'refClass' =&gt; 'PlayersTeams',
            'orderBy' =&gt; 'FIELD(position, "C","1B", "2B" ,"3B", "SS", "OF", "P")'
        ));
    }
}
</code></pre>

<p>
Oh, what's all that other stuff?  That's what took the other half of the hour to figure out.  See, I couldn't use any sort of natural sorting order.  I had a specific order that they needed to be displayed in.  As usual <a href="http://stackoverflow.com/questions/134379/returning-query-results-in-predefined-order">StackOverflow came to my rescue</a>.  I'm pretty sure that what I am doing is MySQL-specific but I imagine you can figure it out for other RDBMS'.
</p>

<p>
So now when I pull in info about a Team, I get the associated Player records sorted to my heart's desire.  Awesome.  This does raise a question:  how would you accomplish this sort of trick if you were using a non-relational database like <a href="http://couchdb.apache.org">CouchDB</a>.  Research for another day I guess.
</p>

        </div>
            </article>
    <article>
        <header>
            <h2><a href="/_posts/2010-02-19-where-in-chris-reads-the-documentation-and-does-not-find-the-answer.markdown"></a></h2>
        </header>
        <div>
            <hr />

<p>layout: post</p>

<h2>title: Where In Chris Reads The Documentation...and Does Not Find The Answer</h2>

<p>If you follow me on Twitter you've seen me pissing and moaning about not being able to figure stuff out as I build out my first <a href="http://framework.zend.com">Zend Framework</a> project in a LONG time.  3 years to be exact.  I had two things that I wanted to add to the project:  (1) a new custom controller to base some other controllers off of and (2) create custom routes for it.  Sounds simple, right?
</p>

<p>
I have stared into the belly of the beast that is the Zend Framework documentation and have discovered the following truth:  there always seems to be two ways to do something.  For someone just starting out learning a framework (never mind their actual level of experience with PHP itself) this is not a good thing.  For example, let's look at creating a new base controller to extend controllers off of.  Via twitter I found the following ways:
<ul>
<li>no, don't do that, use custom action helpers</li>
<li>sure, just put it somewhere and use autoloading to find it</li>
</ul>
</p>

<p>
So I proceeded to start digging around and figure things out.  Hrm, an action helper is not what I need, so let's create that new base controller.  Oh, you mean you can have more than one way to lay out your project, even if you are using Zend_Application?  How come it's not finding the new controller even though I put it in a common place.  Why won't this work?!?  DAMNIT, I AM GOING TO QUIT PROGRAMMING AND RUN A DADDY DAY CARE OUT OF MY HOME.
</p>

<p>Fortunately the custom routing thing was easier to figure out.   Hey, here's an example of adding code to your bootstrap.  Oh wait, I'm using Zend_Application so things are different.  WTF, I am overriding my existing routes and everything is broken?!?  You can put this stuff in XML?!?!  But I am using the .ini format....  Nice, <a href="http://weierophinney.net/matthew/">MWOP</a> pointed me in the right direction.  Good thing he's on twitter.
</p>

<p>
Look, I've talked about this before.  It's awesome to have lots of documentation.  The Zend Framework documentation is awesome...but seems to only have 80% of the solutions I was looking for.  Digging around using Google just seemed to point me at the same 80%-complete documentation.
</p>

<p>
Writing documentation is a thankless task, so do not interpret my comments as a slam against those who are contributing.  I work best when I see FULL examples on how to do something, and then I can "extend and embrace" that to produce the customized solutions I always end up needing.  My complaints are solely my own, which is why I usually blog the solutions when I come up them.  I certainly cannot be the only one having problems sifting through the documentation.
</p>

<p>
As someone who had invested a lot of time in another framework, I am painfully aware of how much you take for granted when using a familiar tool, and then try to help people solve a problem.  My own experiences have ranged from "you are most definitely doing it wrong" to "I've never done it that way, and I can see how that will work".
</p>

<p>
Special thanks to @weierophinney, @elazar and @andriesss for their actual help and offers of help as I stumble around using Zend Framework.
</p>

        </div>
            </article>
    <article>
        <header>
            <h2><a href="/_posts/2010-03-01-people-who-make-me-feel-stupid-geoffrey-grosenbach.markdown"></a></h2>
        </header>
        <div>
            <hr />

<p>layout: post</p>

<h2>title: "People Who Make Me Feel Stupid: Geoffrey Grosenbach"</h2>

<p>For this upcoming week I am going to be doing 5 blog posts about developers who have been doing work that makes me feel stupid as a developer.  The main reason for this is a week spent on introspection as to not only how I am building applications for my employer but also how I build things on the side.  To be blunt, I'm not happy.  This is not to say that the work isn't interesting (building out corporate fantasy sports draft web front-ends and also plans for our next-gen fantasy gaming platform) but rather that my method of choosing what pieces I glue together have been missing the mark.
</p>

<p>Some of this is due to my desire to always push myself to learn new things, so sometimes the joy of discovery tramples the ability to get things done as quickly as I would like.  So I've been looking around at how other people have been solving problems in an attempt to discover blind spots I've developed.  The first person I found that made me say out loud "boy, does this guy make me feel stupid" during this process is <a href="http://geoffreygrosenbach.com/">Geoffrey Grosenbach.</a>
</p>

<p>
About 5 years ago I was looking to get into the Ruby on Rails world.  I had bought the <a href="http://pragprog.com/titles/ruby/programming-ruby">Pick Axe Book</a> and the 1st edition of <a href="http://pragprog.com/titles/rails1/agile-web-development-with-rails-1st-edition">the Rails book</a>.  Through my online digging I discovered the <a href="http://podcast.rubyonrails.org/">Ruby on Rails podcast</a>, run at the time by the previously-mentioned Geoffrey Grosenbach.  It was all cool and interesting, and he seemed to have a knack for asking the right kind of questions.  Either that or he was really good at the editing. ;)
</p>

<p>
Alas, things didn't work out.  I built a Rails site, but it had some problems due to my n00bishness with the framework and the language.  Let's just say I wasn't using Ruby best practices.  The final nail in the coffin for my Ruby aspirations was when I turned down a Rails gig to instead take a telecommuting PHP gig (life choices dictated that one) and I drifted off into other things.  But I kept an eye on what Geoffrey was doing anyway and was happy to see him find success with Peepcode along the way.
</p>

<p>
Then I came across an awesome blog post from him where he talked about <a href="http://blog.peepcode.com/tutorials/2010/about-this-blog">how he builds the Peepcode Blog</a>.  I read it and was totally blown away, and totally humbled by the simplicity of what he has done.  Rather than simply do some link bait and show you everything he used, you can go and look at it
</p>

<p>
He explained that his goal was to produce an "art blog" for Peepcode, where every blog post would have it's own unique look to it.  In order to do this, he had to think about what goes into building something like this:
<ul>
<li>A CSS grid layout system, because it's really too hard to always come up with your own unique layouts.  A grid makes it easier to make interesting content I think.</li>
<li>A very simple application framework for spitting out static images and HTML. (This was the lightbulb-went-on thing for me, as a blog that does not have comments can be totally static)</li>
<li>A modified version of an existing lightweight blogging engine to fit his needs.</li>
<li>Storing blog content in flatfiles on the system.  Again, without dynamic content why bother with the overhead of storing posts in a database (says the guy using WordPress, one of the favourite targets of criticism by PHP developers who like their code clean and modular)</li>
<li>The use of a markup language to reduce the actual HTML he had to write</li>
<li>The use of a CSS framework to again reduce the need to write actual CSS</li>
<li>A sprinkling of Javascript to add unique features to each page</li>
</ul>
</p>

<p>I've read that blog post at least a dozen times now, and still marvel at how frickin' obvious it was to do things the way he did.  It's also obvious that he put a lot of thought into what he needed and the best way to couple things together to make it happen.</p>

<p>
Compare his methods to my current set of decisions as to the various tools to build a web front end for a corporate draft
<ul>
<li>A glue framework with lots of components that can be legitimately accused of starting to become bloated</li>
<li>Use of an ORM to spare me from writing SQL to pull in dynamic sports data</li>
<li>Table-driven HTML layouts from the previous generation of the application</li>
</ul>
When you start to factor in the time to actually learn not only the framework itself (and also heavily relying on a particular module of it to give me the MVC features I wanted) but the ORM itself, I wonder if it was the right decision.
</p>

<p>
Because if I were to break it down in a similar fashion to how the Peepcode blog was built, I'd say I need the following
<ul>
<li>lightweight scripting language front-end (in this case PHP because that's what all our other client-facing applications use)</li>
<li>a component to handle dynamic routing of requests, although I could really use web server rewrite rules instead of making the front-end code figure it out.  My mod_rewrite skills have gotten a little better in the last year or so.</li>
<li>An RDBMs because the source data is in a database already, and so few NoSQL solutions allow you to do the kind of grouping and aggregate math functions I need to do that MySQL can handle for me.</li>
<li>An authentication component.  I've written enough of these to know it's easier to use someone else's that just works</li>
<li>An access control component.  I've written enough of these to know it's easier to use someone else's that just works too.</li>
<li>Grid-based CSS framework for layouts so we can use as few tables as possible.</li>
<li>An easy-to-use Javascript library to take care of everything else that I cannot do in the scripting language or via CSS.</li>
</ul>
</p>

<p>
Man, I'm starting to think that <a href="http://toys.lerdorf.com/archives/38-The-no-framework-PHP-MVC-framework.html">Rasmus was right</a> with apologies to my friend <a href="http://twitter.com/chiggsy">Kevin Beckford</a>.  Kevin is of the opinion that main reason to use a framework to build something is because unless you will be the only one ever to write and maintain that application, the rules and structure that a framework gives are essential to help your fellow coders stay on track.  It's like having a common language that you both speak, and easy access to a dictionary (the documentation for that framework).
</p>

<p>
In my case, I am using PHP + Zend_Framework + Zend_Application + Zend_Auth + Zend_Acl + Doctrine + MySQL (plus Python on the server to do some data munging)  to build this thing out.  Luckily, no Javascript needed at this point.  So what could I strip out to build it the way I put it above?  We could end up with PHP + Apache rewrite rules + Zend_Auth + Zend_Acl + MySQL + Python, with Blueprint CSS thrown in to help me with the layouts.  Not a *whole* lot of difference from before.
</p>

<p>
But of course, I was able to quickly build out admin functionality for the front end due to the ability to map out relationships between tables and having Doctrine pull in all that data and return it to me in a ready-to-go package for easy display.  Also, to be realistic, we are too far into the project to rip all that stuff out and quickly refactor it.  I mean, how do I justify stripping out Doctrine and writing all the "query, process and stick into variables" code now?  It's a delicate dance, and it's obvious those decisions need to be made before you start, not when you're experiencing some mild <a href="http://en.wikipedia.org/wiki/Buyer%27s_remorse">Buyer's Remorse</a>.
</p>

<p>So, in the end, why did Geoffrey Grosenbach make me feel stupid?  <b>It was because he made me realized that I have a tendency to what to overengineer things a bit, wrapping them in framework solutions when perhaps the more direct route is to couple existing modules together to have a more flexible solution</b>.
</p>

<p>
But I have at least considered that the tools I was using were going to make it easier to build out the behind-the-scenes stuff.  Sure, I could write all the SQL code myself (I've finally understood the power of joins), but once I've learned how Doctrine does things it becomes super simple to build on the existing work.  
</p>

<p>
Look at the Peepcode blog setup shows that he was using a bunch of tools already in widespread use in the Ruby and Rails communities.  There are not many equivalences for that stuff in the PHP world (HAML and SASS only have incomplete implementations for use with PHP as far as I can tell) but the approach he used is the one to really think about.  I mean, what would this blog look like if I decided to go the minimalist route, but with tools that I am more comfortable with?  Could I do it with <a href="http://werkzeug.pocoo.org/">Werkzeug</a> + a simple blog engine + <a href="http://en.wikipedia.org/wiki/Textile_(markup_language)">Textile</a> + <a href="http://www.blueprintcss.org/">Blueprint CSS</a> + jQuery?  I have no spare time as it is, what would this type of project do to me?
</p>

        </div>
            </article>
    <nav>
        <a href="/page/124">Newer Posts</a><br />
        <a href="/page/126">Older Posts</a><br />
    </nav>
                </div>
                <div class="span4 sidebar">
                    <div class="well">
                        <h4>@TheKeyboard <small>The ramblings of a grumpy programmer</small></h4>
                    </div>
                    <div class="well sidebar-nav">
                        <h4>Links</h4>
                        <ul class="nav">
                            <li><a href="http://sculpin.io">sculpin.io</a></li>
                            <li><a href="http://twitter.com/getsculpin">@getsculpin</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <footer class="container">
            &copy; 2014 @TheKeyboard
        </footer>

        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="/components/jquery/jquery.min.js"><\/script>')</script>
        <script src="/components/bootstrap/js/bootstrap.min.js"></script>
                
                <script src="/components/highlightjs/highlight.pack.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
    </body>
</html>
