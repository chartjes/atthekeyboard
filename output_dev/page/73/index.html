<!DOCTYPE html>
<html>
    <head>
        <title>Home &mdash; @TheKeyboard &mdash; The ramblings of a grumpy programmer</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="/components/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
        <link href="/components/bootstrap/css/bootstrap-responsive.min.css" rel="stylesheet" type="text/css" />
        <link href="/css/style.css" rel="stylesheet" type="text/css" />
        <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
        <!--[if lt IE 9]>
            <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
        <link rel="stylesheet" href="/components/highlightjs/styles/github.css" />
        <link rel="alternate" type="application/atom+xml" href="/atom.xml" title="@TheKeyboard activity feed" />
        <style>
        /** quick fix because bootstrap <pre> has a background-color. */
        pre code { background-color: inherit; }
        </style>
    </head>
    <body>
        <header>
            <div class="navbar navbar-inverse navbar-fixed-top">
                <div class="navbar-inner">
                    <div class="container-fluid">
                        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </a>
                        <a class="brand" href="/">@TheKeyboard</a>
                        <div class="nav-collapse collapse">
                            <ul class="nav">
                                <li><a href="/blog">Posts Archive</a></li>
                                <li><a href="/blog/categories">Categories</a></li>
                                <li><a href="/blog/tags">Tags</a></li>
                                <li><a href="/about">About</a></li>
                            </ul>
                        </div><!--/.nav-collapse -->
                    </div>
                </div>
            </div>
        </header>
        <div class="mainContent container">
            <div class="row-fluid">
                <div class="span8">
                        <article>
        <header>
            <h2><a href="/_posts/2007-12-04-how-many-times-has-this-happened-to-you.markdown"></a></h2>
        </header>
        <div>
            <hr />

<p>layout: post</p>

<h2>title: How Many Times Has This Happened To You?</h2>

<p>
I had recently upgraded to a new laptop (white MacBook) and had just gotten stuff setup up the way I liked.  So I continued doing development work for my latest work-related project and it was time to push the changes up to the staging server.  Oh wait, I hadn't installed Capistrano yet.  So I installed that and found, oooh, we moved up to version 2.1.  Cool!  Progress is good.</p>

<p>
So I go to deploy and WTF!?!??! It won't work!??!  No error messages except to say the remote command failed.  I dig around on google.  The amount of documentation available for Capistrano 2.0 (or 2.1 for that matter) makes CakePHP's slowly-growing documentation look like Wikipedia.  God damn it, why would you release something that breaks so many things and then don't tell people WHY it won't work.  Maybe I'm doing something wrong, but I'll be damned if I can figure out what it is.
</p>

<p>
So, on to the backup plan.  <a href="http://phing.info/trac/">Phing</a>, despite it's use of XML which I am not huge fan of in terms of it's use as a configuration file, but at least it's PHP and there is lots of documentation on how to use it.  Now, where did I put <a href="http://domain51.com">Travis Swicegood's</a> e-mail address...
</p>

        </div>
            </article>
    <article>
        <header>
            <h2><a href="/_posts/2007-12-09-switched-hosts.markdown"></a></h2>
        </header>
        <div>
            <hr />

<p>layout: post</p>

<h2>title: Switched Hosts</h2>

<p>If you can read this, I've switched hosts from veggiehosting to slicehost.  While it's nice to support a Canadian company (Veggiehosting is in Toronto), I had been having lots of unexplained problems with my slice.  Slowdowns, unannounced outages, SSH connections taking 30 to 40 seconds to come up.</p>

<p>
So, I'm all setup again and just have to finish pointing all my master DNS entries to the new slice.
</p>

        </div>
            </article>
    <article>
        <header>
            <h2><a href="/_posts/2007-12-11-cakephp-pagination-with-a-habtm-relationship.markdown"></a></h2>
        </header>
        <div>
            <hr />

<p>layout: post
title: CakePHP Pagination With A HABTM Relationship
date: 2007-12-11</p>

<h2>author: Chris Hartjes</h2>

<p>There are usually lots of Has And Belongs To Many relationship questions on the CakePHP mailing list.  Since I am stupid about this stuff, I sought out Nate Abele and bugged him via IM until he agreed to give me an example of how to do this.  Thanks Nate!
~~~
class Tag extends AppModel {
 
    var $hasAndBelongsToMany = 'Post';
   
    function paginate($conditions = null, $fields = null, $order = null, $limit = null, $page = 1, $recursive = null) {
        $tag = $conditions['tag'];
        unset($conditions['tag']);
 
        $this->hasAndBelongsToMany['Post'] = am(
            $this->hasAndBelongsToMany['Post'],
            compact('conditions', 'fields', 'order', 'limit', 'page')
        );
        return $this->findByName($tag);
    }
 
    function paginateCount($conditions = null) {
        $tag = $conditions['tag'];
        unset($conditions['tag']);
        $tmp = $this->hasAndBelongsToMany['Post'];
        $this->hasAndBelongsToMany['Post']['fields'] = array('id');
        $tag = $this->findByName($tag);
        $this->hasAndBelongsToMany['Post'] = $tmp;
        return count($tag['Post']);
    }
}
 
?>

<?php 
// Controller code
 
$data = $this->paginate('Tag', array('tag' => $tag));
// Where $tag = some tag name
~~~
Okay, that's great but WHY does it work?  Normally, when you do pagination you have to pass it a bunch of different parameters so it knows what records you wish to include as part of the data set you want to paginate over.  In this example, you've already established that Tag HABTM Post.  In order for the pagination query to correctly pull out the Posts that are also associated with the Tag, you need to merge the parameters you passed in to your 'paginate' method so that the CakePHP data mapping functionality knows what associated records are to be included.  Then run your $this->findByName(...) and you're all set.</p>

        </div>
            </article>
    <nav>
        <a href="/page/72">Newer Posts</a><br />
        <a href="/page/74">Older Posts</a><br />
    </nav>
                </div>
                <div class="span4 sidebar">
                    <div class="well">
                        <h4>@TheKeyboard <small>The ramblings of a grumpy programmer</small></h4>
                    </div>
                    <div class="well sidebar-nav">
                        <h4>Links</h4>
                        <ul class="nav">
                            <li><a href="http://sculpin.io">sculpin.io</a></li>
                            <li><a href="http://twitter.com/getsculpin">@getsculpin</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <footer class="container">
            &copy; 2014 @TheKeyboard
        </footer>

        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="/components/jquery/jquery.min.js"><\/script>')</script>
        <script src="/components/bootstrap/js/bootstrap.min.js"></script>
                
                <script src="/components/highlightjs/highlight.pack.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
    </body>
</html>
