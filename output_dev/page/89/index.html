<!DOCTYPE html>
<html>
    <head>
        <title>Home &mdash; @TheKeyboard &mdash; The ramblings of a grumpy programmer</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="/components/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
        <link href="/components/bootstrap/css/bootstrap-responsive.min.css" rel="stylesheet" type="text/css" />
        <link href="/css/style.css" rel="stylesheet" type="text/css" />
        <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
        <!--[if lt IE 9]>
            <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
        <link rel="stylesheet" href="/components/highlightjs/styles/github.css" />
        <link rel="alternate" type="application/atom+xml" href="/atom.xml" title="@TheKeyboard activity feed" />
        <style>
        /** quick fix because bootstrap <pre> has a background-color. */
        pre code { background-color: inherit; }
        </style>
    </head>
    <body>
        <header>
            <div class="navbar navbar-inverse navbar-fixed-top">
                <div class="navbar-inner">
                    <div class="container-fluid">
                        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </a>
                        <a class="brand" href="/">@TheKeyboard</a>
                        <div class="nav-collapse collapse">
                            <ul class="nav">
                                <li><a href="/blog">Posts Archive</a></li>
                                <li><a href="/blog/categories">Categories</a></li>
                                <li><a href="/blog/tags">Tags</a></li>
                                <li><a href="/about">About</a></li>
                            </ul>
                        </div><!--/.nav-collapse -->
                    </div>
                </div>
            </div>
        </header>
        <div class="mainContent container">
            <div class="row-fluid">
                <div class="span8">
                        <article>
        <header>
            <h2><a href="/_posts/2008-06-10-yes-i-do-some-javascript-programming-as-well.markdown"></a></h2>
        </header>
        <div>
            <hr />

<p>layout: post
title: Yes, I Do Some Javascript Programming As Well</p>

<h2>author: Chris Hartjes</h2>

<p>(before I get into this I wanted to let people know that I will be going to <a href="http://www.zendcon.com/ZendCon08/public/content/home">ZendCon</a> to give my deployment talk.  I might be looking for a place to crash for a second night, so let me know if you're going and can hook me up)</p>

<p>
For a <a href="http://sportso.com">work project</a> I had to add in some Ajax functionality for a scoreboard feature, where users will enter scores for periods / quarters / innings and then the total score has to update automatically on the screen before the user wishes to save that scoring document.  So with some help from one of my online <a href="http://marcgrabanski.com/">javascript ninja associates</a> and Google searches, I got it all figured out, and thought I would share.
</p>

<p>
Here's a snapshot of the interface in question:
<img src="http://chrishartjes.com/sportso-scoreboard.png" alt="Sportso scoreboard interface" / width=532 height=183  />
</p>

<p>
The first thing I did was apply the same class name to the away "innings" and home "innings" form fields, so that $().serialize would be able to pull up all those fields.  That way, it wouldn't matter how many "inning" fields there might be.  The tricky thing I found out was that I need to wrap my $('.homePeriods').change() call in it's own function() call so that it would actually be loaded when the page was loaded as well.  I had no idea I needed to do that, and thanks to Marc for pointing it out.  If there is a better method, let me know.
<br />
~~~
// Method used to automatically update total fields
// when editing individual periods
$(function(){ 
    $('.homePeriods').change(function(){
        var params = $('.homePeriods').serialize();
        var pArray = params.split('&');
        var homeTotal = 0;

        for (var i=0; i < pArray.length; i++) {
            var temp = pArray[i].split('=');
            var homePeriod = temp[1];
            // Cast value to an integer with this little hack
            homePeriod = homePeriod - 0;
            homeTotal += homePeriod;
        }

        $('#homeScoreTotal').replaceWith('<td class="period" id="homeScoreTotal"><input type="text" name="homeScoreTotal" value="' + homeTotal + '" maxlength="2" size="2" id="htotal" />');
    });

    $('.awayPeriods').change(function(){
        var params = $('.awayPeriods').serialize();
        var pArray = params.split('&');
        var awayTotal = 0;

        for (var i=0; i < pArray.length; i++) {
            var temp = pArray[i].split('=');
            var awayPeriod = temp[1];
            awayPeriod = awayPeriod - 0;
            awayTotal += awayPeriod;
        }

        $('#awayScoreTotal').replaceWith('<td class="period" id="awayScoreTotal"><input type="text" name="awayScoreTotal" value="' + awayTotal + '" maxlength="2" size="2" id="vtotal" />');
    });
});
~~~
</p>

<p>
So, here's a small movie showing that in action.
<br />
<br />
[flv:http://www.archive.org/download/SportsoDynamicScoreboard/sportso-scoreboard.flv 533 400]
</p>

<p>I hope this helps out other people looking to add similar functionality to their site.</p>

        </div>
            </article>
    <article>
        <header>
            <h2><a href="/_posts/2008-06-13-accuracy-in-baseball-simulations.markdown"></a></h2>
        </header>
        <div>
            <hr />

<p>layout: post</p>

<h2>title: Accuracy In Baseball Simulations</h2>

<p>I know I don't talk much about my life outside of programming, but for the past 12 years I've been running a team in the <a href="http://www.ibl.org">Internet Baseball League</a>, and have been the commissioner for 10 of those years.  I'm also on the design team for the <a href="http://iblgame.ibl.org">dice-and-charts baseball game we use for the league</a>.  My contribution has been writing Perl scripts to generate the ratings we use for our throwing arms and baserunning ratings.  Anyhow, I (and other league members) wonder if people use the game to run their own replays, as most of us just play in the IBL and that's it.  My friend Sean told me today via IM that one guy emailed him with a spreadsheet showing him the results of a replay in progress of the Boston Red Sox 2007 season.  Here's what this guy said:
<blockquote>
"I am replaying the 2007 Red Sox with IBL and thought you might like to
   see the stats to date (attached). I am using retrosheet.org and am
   playing the "as played "starting lineups. Relief pitchers are used as
   closely to "as played" usage as possible, but obviously game situations
   dictate which relievers appear in a particular game.
   Let me know what you think. While individual averages will invariably
   vary, through 77 games the team batting average is identical to the
   actual 2007 (full) season and OBP is only .04 from the actual. I truly
   appreciate the time and effort that you have devoted to making this
   game so accurate."
</blockquote>
</p>

<p>One of the things we pride ourselves is all the work that we've put into TIG (The IBL Game as it's called) to make it not only one of the most accurate dice-and-charts baseball simulation games out there, but also to give it away for free.  All that hard work is worth it when you see e-mails like this.
</p>

        </div>
            </article>
    <article>
        <header>
            <h2><a href="/_posts/2008-06-13-cakephp-and-the-iphone.markdown"></a></h2>
        </header>
        <div>
            <hr />

<p>layout: post</p>

<h2>title: CakePHP and the iPhone</h2>

<p>I lost my cellphone last night, which sucks because the phone I want isn't going to be available until July 11th.  I'll get a loaner phone until then, but it is exciting times to be a web developer.  Why?  Because the introduction of the iPhone there is a renewed interest in web sites that cope well with mobile browsing.  I'm working on an app that is perfect for mobile browsing, but that is still down the road.</p>

<p>
Anyhow, I saw a post the other day showing how to create an <a href="http://www.symfony-project.org/blog/2008/06/09/how-to-create-an-optimized-version-of-your-website-for-the-iphone-in-symfony-1-1">iPhone-optimized version of your Symfony app</a>.  Yawn.  Cake <a href="http://bakery.cakephp.org/articles/view/building-an-iphone-app-in-a-day">had that a year ago.</a>.  No code provided *but* the article does tell you exactly how he did it.
</p>

<p>
But that's really the key here.  You don't need to do anything special to make a web-based app in CakePHP that will work nicely on your iPhone.  Contrast that to all the stuff I see in that article that you need to do.  Off the top of my head, it seems to me the best way to do it is:
<ul>
<li>create CSS and layouts for regular and iPhone versions of your application</li>
<li>do a check in your beforeFilter() method where you check the User-Agent</li>
<li>pass that info to your actions, and render whichever layout+CSS you need</li>
</ul>
</p>

<p>Compare the Symfony article to the CakePHP article plus my notes, and let me know what you think.</p>

        </div>
            </article>
    <nav>
        <a href="/page/88">Newer Posts</a><br />
        <a href="/page/90">Older Posts</a><br />
    </nav>
                </div>
                <div class="span4 sidebar">
                    <div class="well">
                        <h4>@TheKeyboard <small>The ramblings of a grumpy programmer</small></h4>
                    </div>
                    <div class="well sidebar-nav">
                        <h4>Links</h4>
                        <ul class="nav">
                            <li><a href="http://sculpin.io">sculpin.io</a></li>
                            <li><a href="http://twitter.com/getsculpin">@getsculpin</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <footer class="container">
            &copy; 2014 @TheKeyboard
        </footer>

        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="/components/jquery/jquery.min.js"><\/script>')</script>
        <script src="/components/bootstrap/js/bootstrap.min.js"></script>
                
                <script src="/components/highlightjs/highlight.pack.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
    </body>
</html>
