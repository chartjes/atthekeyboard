<!DOCTYPE html>
<html>
    <head>
        <title>Home &mdash; @TheKeyboard &mdash; The ramblings of a grumpy programmer</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="/components/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
        <link href="/components/bootstrap/css/bootstrap-responsive.min.css" rel="stylesheet" type="text/css" />
        <link href="/css/style.css" rel="stylesheet" type="text/css" />
        <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
        <!--[if lt IE 9]>
            <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
        <link rel="stylesheet" href="/components/highlightjs/styles/github.css" />
        <link rel="alternate" type="application/atom+xml" href="/atom.xml" title="@TheKeyboard activity feed" />
        <style>
        /** quick fix because bootstrap <pre> has a background-color. */
        pre code { background-color: inherit; }
        </style>
    </head>
    <body>
        <header>
            <div class="navbar navbar-inverse navbar-fixed-top">
                <div class="navbar-inner">
                    <div class="container-fluid">
                        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </a>
                        <a class="brand" href="/">@TheKeyboard</a>
                        <div class="nav-collapse collapse">
                            <ul class="nav">
                                <li><a href="/blog">Posts Archive</a></li>
                                <li><a href="/blog/categories">Categories</a></li>
                                <li><a href="/blog/tags">Tags</a></li>
                                <li><a href="/about">About</a></li>
                            </ul>
                        </div><!--/.nav-collapse -->
                    </div>
                </div>
            </div>
        </header>
        <div class="mainContent container">
            <div class="row-fluid">
                <div class="span8">
                        <article>
        <header>
            <h2><a href="/blog/4400/11/25/the-birth-of-grumpy-learning">The birth of Grumpy Learning</a></h2>
        </header>
        <div>
            <p>It's no secret that I have been pushing my "grumpy programmer" brand hard.
Why not? It's delivering a non-trivial amount of side income for me and I
have been really enjoying it.</p>

<p>This past fall I taught an in-person course that I called my "PHP Testing
Bootcamp" where I spent about 6 hours showing a bunch of PHP programmers
how to twist their code into testable shape. That got me to thinking that
I want to do more of that, as I found that process enjoyable as well.</p>

<p>As I also create more products I need a place for them all to live. I have
books, and now a course I can teach and I am planning on producing
screencasts for sale as well. With that in mind, I am happy to announce
I have created <a href="http://grumpy-learning.com">Grumpy Learning</a>, an umbrella
site for all my training and teaching efforts to hang from. While you are
there, please join the mailing list via the form I have up there. I promise
to not give your email address to anyone else and will give you something
every two weeks related to testing or share other thoughts I have.</p>

<p>As part of this, I will be teaching my "PHP Testing Bootcamp" course again
but this time doing it online. Check out the <a href="http://phptestingbootcamp.eventbrite.com/">site for the course</a>
for details, but here's the summary:</p>

<p>9 tickets available to do the course with me live at $250 per student. Three
session (January 3, 10 and 17) running from 9pm until about 11pm Eastern
Standard Time. I've already sold 3 of the 9, so you might want to hurry up.</p>

<p>Then I have up to 50 tickets available to get just the recordings of the
course for $125. If you can't make it due to time zone differences or
prior commitments, the videos of me teaching the course and answering
questions is a great option. I've sold 2 of these, so plenty of them
left.</p>

<p>Students who participate in the live sessions will also get access to the
videos as part of their tickets.</p>

<p>If you've ever wondered how someone who takes coding and testing seriously
works in a test-centric manner, this is your chance. Give yourself an
awesome gift for the holiday: a chance to learn how to write testable
code and the tools that make it happen.</p>

        </div>
            </article>
    <article>
        <header>
            <h2><a href="/blog/2800/11/25/phpspec-and-the-new-wave-of-testing">PHPSpec and the new wave of testing</a></h2>
        </header>
        <div>
            <p>I promised <a href="https://twitter.com/everzet">@everzet</a> almost two weeks ago that
I would take a look at his latest project, <a href="http://www.phpspec.net">phpspec</a>,
and let him know what I think.</p>

<p>I think that we are witnessing the first wave of new testing tools in the PHP
community that allow developers to wrap their applications in automated tests.</p>

<p>I am familiar with the BDD-style that is being promoted in PHPSpec, through
my work with <a href="http://behat.org">Behat</a> to create automated user acceptance
tests. I think if you want a tl;dr version of PHPSpec I would tell you
"write hybrid unit/integration tests using plain language".</p>

<p>The concept that is being promoted is "SpecBDD". It means "writing tests
to a specification and then writing code until that specification is met."
Not a lot different than writing tests using tools like PHPUnit.</p>

<p>Your still going to have to write code that you can test if you want to
use phpspec. That means you still need to know about dependency injection
and other characteristics of testable code. Sorry, no magic testing pixie
dust here.</p>

<p>I was also surprised to see the use of mock objects, which are being 
called "Prophet Objects", but that means that you can really write specs
that test for things in isolation.</p>

<p>Mock objects are, in my opinion, the conceptual stumbling block that
developers need to get over in order to really, deeply understand how
to write effective tests. I am happy to see phpspec promote this idea
and provide a fairly simple API to do it.</p>

<p>The process is the same as it would be if you were using PHPUnit: write
the test / spec, and write the damn code until everything passes. Again,
no magic testing pixie dust.</p>

<p>(By the way, if someone makes me a "magic testing pixie" t-shirt, men's size
XXL or larger, I will purchase it YESTERDAY).</p>

<p>Keep on cranking out the tools, make them useful for people OTHER than testing
zealots to use them, and you have yourself an unstoppable wave of automated
testing.</p>

        </div>
            </article>
    <article>
        <header>
            <h2><a href="/blog/2400/11/25/build-php-54-on-centos-with-vagrant">Build PHP 5.4 on CentOS with Vagrant</a></h2>
        </header>
        <div>
            <p>I like the idea of using <a href="http://vagrantup.com">Vagrant</a> to create virtual
machines for my development work. Doing things this way I think keeps the
host machine cleaner and allows you the ability to distribute those VM's
to other people as well.</p>

<p>My old boss Ben Ramsey did a very informative post on <a href="http://benramsey.com/blog/2012/03/build-php-54-on-centos-62/">getting PHP 5.4 configured on CentOS</a>
so I decided to one-up him by taking his instructions and creating a <a href="http://puppetlabs.com/">Puppet</a>
manifest so you could do this using Vagrant or on any server that you can 
provision using Puppet.</p>

<p>First, you will need a CentOS base box to play with. I used <a href="http://www.vagrantbox.es/37/">this box</a>
but I think any CentOS 6.0 (or above) base box will do. If you are feeling really
adventurous you could grab an ISO and use <a href="https://github.com/jedi4ever/veewee">Vewee</a> 
and follow <a href="http://www.ducea.com/2011/08/15/building-vagrant-boxes-with-veewee/">these instructions</a>
to create your own.</p>

<p>Whatever box you choose, the next step is to create the directory where your VM
will run and run 'vagrant init' with the name of the box and then edit the Vagrantfile.
Here's a condensed version of my Vagrantfile</p>

<pre><code>Vagrant::Config.run do |config|
  config.vm.box = "centos-60-x86_64"

  config.vm.forward_port 80, 8080
  config.vm.forward_port 8000, 8000

  config.vm.provision :puppet do |puppet|
     puppet.manifests_path = "manifests"
     puppet.manifest_file  = "default.pp"
  end
end
</code></pre>

<p>Those port forwards are identical to the ones that Ben suggested using. You
can get rid of the one that maps port 8000 if you don't feel like playing
around with the new built-in web server introducted in PHP 5.4.</p>

<p>Now, create the manifests directory inside the directory where you are placing
the new VM and add a file called default.pp that looks like this:</p>

<pre><code># Puppet manifest for my PHP dev machine

class httpd {
  exec { 'yum-update':
    command =&gt; '/usr/bin/yum -y update'
  }

  package { "httpd":
    ensure =&gt; present,
  }

  package { "httpd-devel":
    ensure  =&gt; present,
  }
}

class phpdev {
  package { "libxml2-devel":
    ensure  =&gt; present,
  }


  package { "libXpm-devel":
    ensure  =&gt; present,
  }

  package { "gmp-devel":
    ensure  =&gt; present,
  }

  package { "libicu-devel":
    ensure  =&gt; present,
  }

  package { "t1lib-devel":
    ensure  =&gt; present,
  }

  package { "aspell-devel":
    ensure  =&gt; present,
  }

  package { "openssl-devel":
    ensure  =&gt; present,
  }

  package { "bzip2-devel":
    ensure  =&gt; present,
  }

  package { "libcurl-devel":
    ensure  =&gt; present,
  }

  package { "libjpeg-devel":
    ensure  =&gt; present,
  }

  package { "libvpx-devel":
    ensure  =&gt; present,
  }

  package { "libpng-devel":
    ensure  =&gt; present,
  }

  package { "freetype-devel":
    ensure  =&gt; present,
  }

  package { "readline-devel":
    ensure  =&gt; present,
  }

  package { "libtidy-devel":
    ensure  =&gt; present,
  }

  package { "libxslt-devel":
    ensure  =&gt; present,
  }
}

class rpmforge {
  exec {
    "/usr/bin/wget http://packages.sw.be/rpmforge-release/rpmforge-release-0.5.2-2.el6.rf.x86_64.rpm":
      alias   =&gt; "grab-rpmforge",
  }

  exec {
    "/bin/rpm --import http://apt.sw.be/RPM-GPG-KEY.dag.txt":
      alias   =&gt; "import-key",
      require =&gt; Exec["grab-rpmforge"],
  }

  exec {
    "/bin/rpm -i rpmforge-release-0.5.2-2.el6.rf.*.rpm":
      alias   =&gt; "install-rpmforge",
      require =&gt; Exec["import-key"],
  }

  package { "libmcrypt-devel":
    ensure  =&gt; present,
    require =&gt; Exec["install-rpmforge"]
  }
}

include httpd
include phpdev
include rpmforge

</code></pre>

<p>Now, there <em>appears</em> to be a lot of stuff going on in there, but it's actually
quite simple. I broke things down into 3 distinct groups.</p>

<p>The first group (
which I called 'httpd') makes sure that we install Apache 2 and the development
libraries and header files that will be needed to compile PHP. Then we open up
the firewall to allow access to the VM on those two ports. By default Vagrant
maps port 22 on the VM to port 2222 on the VM, so no need to add that in.</p>

<p>The next group (phpdev) is installing all the support libraries that Ben recommended 
in his own article.</p>

<p>Finally we need to execute a few commands to allows us to also install libmcrypt-devel
because it is not part of the standard CentOS distribution, but is available via
RPMForge.</p>

<p>Save that file (make sure there are no typos either from me or from you!), then type
'vagrant up' and it will try and it will try to provision your new server with this
Puppet manifest and add in all your files.</p>

<p>Then you can follow the rest of Ben's instructions on how to compile PHP 5.4 (I
installed PHP 5.4.1RC1 just to be living on the edge) and don't forget to verify
that your Apache setup is configured to all you to serve up PHP files.</p>

<p>I think that you can have a cutting-edge CentOS VM with the latest PHP installed on
it up and running in under an hour from starting to download your CentOS Vagrant
base box to verifying your test file with phpinfo() in it worked.</p>

        </div>
            </article>
    <nav>
        <a href="/page/139">Newer Posts</a><br />
        <a href="/page/141">Older Posts</a><br />
    </nav>
                </div>
                <div class="span4 sidebar">
                    <div class="well">
                        <h4>@TheKeyboard <small>The ramblings of a grumpy programmer</small></h4>
                    </div>
                    <div class="well sidebar-nav">
                        <h4>Links</h4>
                        <ul class="nav">
                            <li><a href="http://sculpin.io">sculpin.io</a></li>
                            <li><a href="http://twitter.com/getsculpin">@getsculpin</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <footer class="container">
            &copy; 2014 @TheKeyboard
        </footer>

        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="/components/jquery/jquery.min.js"><\/script>')</script>
        <script src="/components/bootstrap/js/bootstrap.min.js"></script>
                
                <script src="/components/highlightjs/highlight.pack.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
    </body>
</html>
