<!DOCTYPE html>
<html>
    <head>
        <title>Home &mdash; @TheKeyboard &mdash; The ramblings of a grumpy programmer</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="/components/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
        <link href="/components/bootstrap/css/bootstrap-responsive.min.css" rel="stylesheet" type="text/css" />
        <link href="/css/style.css" rel="stylesheet" type="text/css" />
        <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
        <!--[if lt IE 9]>
            <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
        <link rel="stylesheet" href="/components/highlightjs/styles/github.css" />
        <link rel="alternate" type="application/atom+xml" href="/atom.xml" title="@TheKeyboard activity feed" />
        <style>
        /** quick fix because bootstrap <pre> has a background-color. */
        pre code { background-color: inherit; }
        </style>
    </head>
    <body>
        <header>
            <div class="navbar navbar-inverse navbar-fixed-top">
                <div class="navbar-inner">
                    <div class="container-fluid">
                        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </a>
                        <a class="brand" href="/">@TheKeyboard</a>
                        <div class="nav-collapse collapse">
                            <ul class="nav">
                                <li><a href="/blog">Posts Archive</a></li>
                                <li><a href="/blog/categories">Categories</a></li>
                                <li><a href="/blog/tags">Tags</a></li>
                                <li><a href="/about">About</a></li>
                            </ul>
                        </div><!--/.nav-collapse -->
                    </div>
                </div>
            </div>
        </header>
        <div class="mainContent container">
            <div class="row-fluid">
                <div class="span8">
                        <article>
        <header>
            <h2><a href="/_posts/2006-09-28-zend_service_audioscrobbler-update.markdown"></a></h2>
        </header>
        <div>
            <hr />

<p>layout: post</p>

<h2>title: Zend_Service_Audioscrobbler Update</h2>

<p>In my spare time I've been banging away at writing the required unit tests for the <a href="http://framework.zend.com/wiki/display/ZFPROP/Zend_Service_Audioscrobbler+Proposal+-+Chris+Hartjes,+Derek+Martin">Zend_Service_Audioscrobbler</a> component that <a href="http://derekmartin.ca">Derek</a> and I had started.  I finished all the unit tests for the user based functions, which is a nice milestone.  Then I decided to go back and actually read the comments made from the proposal.  Oops.  I discovered there were a bunch of changes that the folks at Zend said needed to be made in order to accept them.  I agree with most of them.  To save you the trouble of scrolling all the way to the bottom, here they are:
</p>

<blockquote>
Zend Comments

The proposal is approved on the condition that the following issues are addressed by the proposal author.

Public properties make the set* methods redundant. Ideas for resolution:

    * Change the properties to be protected and using the existing set* methods along with new corresponding get* methods.
    * Override __get() and __set(), storing properties in a protected array.

Another option would be to pass the "properties" as method arguments:

< ?php
$as = new Zend_Service_Audioscrobbler();
$profileInfo = $as->userGetProfileInformation('BigDaddy71');
$relatedArtists = $as->artistGetRelatedArtists('LCD Soundsystem');
// ...
?>

No underscores within variable names and compliance with other coding standards.

What is the reason that setDate() and getInfo() methods are designated private? Should they not be inherited and accessible by subclasses, and if so, why not?

We should leverage Zend_Date as it becomes available for date-specific operations.

How do Zend_Service_Audioscrobbler and the Audioscrobbler web services support limiting the number of records returned by a request?

The API presented causes extra effort to programmatically select functionality, due to the practice of essentially embedding options into the method names. Usually function names accept parameters to select between different, related behaviors. For example, the proposal shows:

public function userGetRecentWeeklyArtistChart()
public function userGetRecentWeeklyAlbumChart()
public function userGetRecentWeeklyTrackChart()
public function userGetPreviousWeeklyArtistChart()
public function userGetPreviousWeeklyAlbumChart()
public function userGetPreviousWeeklyTrackChart()

Using class constants having string values we could nicely refactor the above list of methods to something like:

getChart($type, $recent = true)

Similarly, what about:

// source = 'user' | 'artist'
// type = 'artists' | 'albums' | 'tracks' | etc.
getTop($source, $type)
</blockquote>

<p>
All very sensible, so I've got some refactoring work to do.
</p>

        </div>
            </article>
    <article>
        <header>
            <h2><a href="/_posts/2006-10-04-its-dead-jim.markdown"></a></h2>
        </header>
        <div>
            <hr />

<p>layout: post</p>

<h2>title: It's Dead, Jim</h2>

<p>
(I appologize for the cheesy Star Trek quote above).
</p>

<p>
My beloved iBook gave up the ghost on Sunday night, and is currently in good hands with a man I only know as MacGenius.  It's definitely hardware related as the hard-drive is okay and the diagnostics for the memory and other stuff turned up ok.  Maybe the hard-drive controller.  Anyway, my work very generously replaced my iBook for me with a new MacBook, and boy is it slick. ;)
</p>

<p>
Anyhow, I'm busy rebuilding all the developer's tools I normally use (Ruby, PHP, MySQL, Postgres) so I can get back to actually Getting Things Done.  Once that is set, then I'll be monkeying around with some changes to Zend_Service_Audioscrobbler.
</p>

        </div>
            </article>
    <article>
        <header>
            <h2><a href="/_posts/2006-10-06-tutorial-how-to-create-a-thread-in-vbulletin-with-a-script.markdown"></a></h2>
        </header>
        <div>
            <hr />

<p>layout: post
title: "Tutorial: How to create a thread in vBulletin with a script"
author: Chris Hartjes</p>

<h2>date: 2006-10-06</h2>

<p>
My day-job requires me to create code that will talk to <a href="http://www.vbulletin.com">vBulletin</a> web sites we run.  My latest task involves taking data that we get from <a href="http://www.pa-sportsticker.com/en/index.html">PA Sportsticker</a> and create posts in one of our forums.  Lucky for me, somebody smarter than me figured out how to do this.  It's very simple, and I've taken their work and modified it for our needs.
<br />
~~~
<?php

/**
 * Script that posts info sent to it by the Sportsticker parser as a thread in a forum
 * Based on code found in http://www.vbulletin.org/forum/showthread.php?t=97283&page=2
 *
 * @author Chris Hartjes
 */

require './global.php';
require './includes/class_dm.php';
require './includes/class_dm_threadpost.php';
require './includes/functions_databuild.php';

$threaddm = new vB_DataManager_Thread_FirstPost($vbulletin, ERRTYPE_STANDARD);
$post_userid = 1; // Admin
$userid = 1;
$user_name = 'chartjes';
$allow_smilie = '1';
$visible = '1';

if (isset($_POST['forum_id'])) $forum_id = (int)$_POST['forum_id'];
if (isset($_POST['post_text'])) $post_text = (string)strip_tags($_POST['post_text']);
if (isset($_POST['title'])) $title = (string)strip_tags($_POST['title']);

$threaddm->do_set('forumid', $forum_id);
$threaddm->do_set('postuserid', $post_userid);
$threaddm->do_set('userid', $userid);
$threaddm->do_set('username', $user_name);
$threaddm->do_set('posttext', $post_text);
$threaddm->do_set('title', $title);
$threaddm->do_set('allowsmilie', $allow_smilie);
$threaddm->do_set('visible', $visible);
$threaddm->save();
build_forum_counters($forum_id);

?>
~~~
</p>

<p>
I did see some talk abot how using that do_set method is not recommended as it bypasses the data manager object vBulletin uses.  I tried using that datamanager by actually looking at the code that does posts, but couldn't get it to work.  I suspect part of the problem is that the data manager assumes you are logged in, while you can post without being logged in with the method above.  At least it sure looks that way.  More testing is obviously required but I think I'm on the right track.
</p>

<p>
In a nutshell, the script that I wrote to parse the XML feed that Sportsticker provides will grab all the necessary info from the stream and then send that data to the above code via a POST request.  Nice and simple.  Hope this code sample helps.
</p>

        </div>
            </article>
    <nav>
        <a href="/page/33">Newer Posts</a><br />
        <a href="/page/35">Older Posts</a><br />
    </nav>
                </div>
                <div class="span4 sidebar">
                    <div class="well">
                        <h4>@TheKeyboard <small>The ramblings of a grumpy programmer</small></h4>
                    </div>
                    <div class="well sidebar-nav">
                        <h4>Links</h4>
                        <ul class="nav">
                            <li><a href="http://sculpin.io">sculpin.io</a></li>
                            <li><a href="http://twitter.com/getsculpin">@getsculpin</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <footer class="container">
            &copy; 2014 @TheKeyboard
        </footer>

        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="/components/jquery/jquery.min.js"><\/script>')</script>
        <script src="/components/bootstrap/js/bootstrap.min.js"></script>
                
                <script src="/components/highlightjs/highlight.pack.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
    </body>
</html>
