<!DOCTYPE html>
<html>
    <head>
        <title>Home &mdash; @TheKeyboard &mdash; The ramblings of a grumpy programmer</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="/components/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
        <link href="/components/bootstrap/css/bootstrap-responsive.min.css" rel="stylesheet" type="text/css" />
        <link href="/css/style.css" rel="stylesheet" type="text/css" />
        <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
        <!--[if lt IE 9]>
            <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
        <link rel="stylesheet" href="/components/highlightjs/styles/github.css" />
        <link rel="alternate" type="application/atom+xml" href="/atom.xml" title="@TheKeyboard activity feed" />
        <style>
        /** quick fix because bootstrap <pre> has a background-color. */
        pre code { background-color: inherit; }
        </style>
    </head>
    <body>
        <header>
            <div class="navbar navbar-inverse navbar-fixed-top">
                <div class="navbar-inner">
                    <div class="container-fluid">
                        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </a>
                        <a class="brand" href="/">@TheKeyboard</a>
                        <div class="nav-collapse collapse">
                            <ul class="nav">
                                <li><a href="/blog">Posts Archive</a></li>
                                <li><a href="/blog/categories">Categories</a></li>
                                <li><a href="/blog/tags">Tags</a></li>
                                <li><a href="/about">About</a></li>
                            </ul>
                        </div><!--/.nav-collapse -->
                    </div>
                </div>
            </div>
        </header>
        <div class="mainContent container">
            <div class="row-fluid">
                <div class="span8">
                        <article>
        <header>
            <h2><a href="/_posts/2009-11-05-next-gen-work-projects.markdown"></a></h2>
        </header>
        <div>
            <hr />

<p>layout: post</p>

<h2>title: Next-Gen Work Projects</h2>

<p>We are contemplating the next generation of our <a href="http://www.xmlteam.com/feedfetcher.php">XML feed processing applicatioin</a> and discussing what technologies we want to use.  Personally, I was pushing for <a href="http://twistedmatrix.com">Twisted</a> because of it's support for concurrency and, well, it's Python.  The main dev on the project (it is currently a Perl application) likes Java, as does our sysadmin (who also updated some existing infrastructure to use Java).  At one time I thought that we could replace some existing Ruby code in our system with some <a href="http://www.jython.org/">Jython</a> code, but like many things I have not been able to free up the time to work on it.
</p>

<p>Since we seemed determined to use Java, I decided to see if I could pique the Java boyz interests and suggested that we take a look at <a href="http://www.scala-lang.org/">Scala</a>.  It's terse, totally object-oriented and has full interoperability with Java itself.  Which, hopefully, means that some of the libraries available for Java that would be of use to our project could be used within Scala as well.
</p>

<p>
See, I'm stuck between a rock and a hard place here:  I'd love to be involved in this project because Scala seems cool, and I've never done any work with Java before.  But will I ever get the chance, being the main web-app guy at work now?  *sigh*
</p>

<p>
I guess I could always go into stealth mode and see if I could whip together a quick prototype using Twisted, just to see if it could connect to our systems and pull down documents.  Hrm...HRM....MUAHAHAHAHAHAHAHAHAHAH.  Time to see if all the comments people made in my Twisted (web) vs. Tornado post are true, and that Twisted is a viable option for pulling in XML documents and parsing them so they fit into a relational database, like our existing product.  It could also be a good excuse to stretch out the use of <a href="http://exist.sourceforge.net">eXist</a> and store documents in that.
</p>

        </div>
            </article>
    <article>
        <header>
            <h2><a href="/_posts/2009-11-07-sending-data-via-http-put-using-basic-authentication.markdown"></a></h2>
        </header>
        <div>
            <hr />

<p>layout: post</p>

<h2>title: Sending data via HTTP-PUT using Basic Authentication</h2>

<p>(This is another problem I solved with the help of <a href="http://stackoverflow.com"</a>Stack Overflow</a> and some <a href="http://en.wikipedia.org/wiki/Rubber_duck_debugging">rubber duck debugging</a>)
</p>

<p>
While cleaning up some code I noticed a function that was sending data via an HTTP-PUT had stopped working.  A classic example of code "accidentally working".  So, this was the perfect opportunity to (a) write a test to verify that it worked and (b) clean up the code so that it was doing the job properly.  It had been using cURL, but I was using PHP streams elsewhere so I decided to be consistent.
</p>

<p>
So here's what we had to do:
<ul>
<li>Pass the code a URL of where the file was going to end up on the eXist DB server</li>
<li>Pass the name of the temporary file that contained the info</li>
<li>Send the file via HTTP-PUT to eXist, along with the username and password it requires.</li>
</ul>
</p>

<p>
The old code was sending the username and password as part of the URL, but that simply was not working any more.  Why it stopped working isn't all that important except to say that passing the username and password the *proper* way, which is via the HTTP header in the request, is the correct way to go.
</p>

<p>
So, I googled around, looked at my existing code (including an <a href="http://www.littlehart.net/atthekeyboard/2008/01/11/how-to-http-put-a-file-somewhere-using-php/">old blog post</a>) I tried a few things and just couldn't get it to work.  The problem?  I kept getting a "401 Authorization denied" message.  I was positive I was sending the header in the correct format.  So, I asked Stack Overflow to help me while I looked at the code with my trusty stuffed Grumpy Dwarf doll (you know, from the Disney Movie) in my lap looking at the screen while I went over the code.
</p>

<p>
You know, I never figured that "rubber duck debugging" worked, but in this instance by explaining what I'm doing I figured out a few things:
<ul>
<li>Don't blindly trust code examples you find on the internet</li>
<li>Sometimes taking the time to explain how something is supposed to work someone actually makes it easier for you to figure it out.</li>
</ul>
</p>

<p>
Lo and behold, I <a href="http://stackoverflow.com/questions/1691530/sending-a-file-via-http-put-in-php">figured it out</a>.  I'll repost the code here too:
<br />
~~~
$params = array(
    'http' => array(
        'method' => 'PUT',
        'header' => "Authorization: Basic " . base64_encode($this->ci->config->item('ws_login') . ':' . $this->ci->config->item('ws_passwd')) . "\r\nContent-type: text/xml\r\n",
        'content' => file_get_contents($tmpFile)
             )
         );
$ctx = stream_context_create($params);
$response = @file_get_contents($url, false, $ctx);

return ($response == '');
~~~
</p>

<p>
My mistake?  For some reason unbeknownst to me I was passing an array of values as the header.  Dunno why I did it, must've got it from an example somewhere.  Now I have code that successfully sends my file to eXist via HTTP-PUT.  The only thing I do not like is that I have to suppress the output of file_get_contents() because it throws a warning while also reporting the successful 201 HTTP response code.  Perhaps there is another way to do it, but I know with 100% certainty that this code does work.
</p>

        </div>
            </article>
    <article>
        <header>
            <h2><a href="/_posts/2009-11-09-why-i-dont-want-to-use-tools-written-for-php-4.markdown"></a></h2>
        </header>
        <div>
            <hr />

<p>layout: post</p>

<h2>title: Why I Don't Want To Use Tools Written For PHP 4</h2>

<p>
I was engaged in a lively discussion on Twitter this morning sparked by someone grumbling that people should not be writing frameworks that target PHP 4.  In the course of that discussion, I offered my opinion on a couple of things:
<ul>
<li><a href="http://codeigniter.com">My least favourite framework</a> suffers from having code that detects whether or not you are using PHP 4</li>
<li>PHP 5 has been out long enough that pandering (I do not know if there is a better word for that) to the crowd that does not want to update to it is counter-productive.</li>
</ul>
</p>

<p>It was pointed out to me that CodeIgniter has 23 lines of code in it dedicated to detecting what version of PHP you are running.  In my opinion, that is 23 too many.  
</p>

<p>
Of course, it isn't as simple as that.  If you have customers who are paying you for your application and they are running PHP 4, well, you have a tough decision:  keep supporting them and your application becomes more and more convoluted as the language changes or be bold and tell them "from this point forward new versions of my application will be PHP 5 only."  I think the truth is that very few people are willing to make that sort of stand, and that's okay.  In the end, you really should use whatever tools you are comfortable with.  But it's important to understand why those tools are, in the big picture, substandard.
</p>

<p>
My personal opinion is that PHP 5 has enough new features that either replace existing functionality in PHP 4 or give you features that were not available before, only sheer apathy prevents you from creating a PHP 5-specific version of your application.  Not to mention that PHP 5 itself runs faster than PHP 4. If you have to turn on E_STRICT so your application stops spitting out errors all over the place, you are doing it wrong.
</p>

<p>
What I think would be very interesting is to see how <a href="http://www.rubyonrails.org">Ruby on Rails</a> and <a href="http://www.djangoproject.com">Django</a> handle this problem:  what sort of contortions do they go through when Ruby and Python (respectively) make changes and perhaps break backwards compatibility.  Is PHP the only programming language for the web where the people running older versions hold onto it kicking and screaming, despite gobs of evidence that newer stable versions of the language have fixed bugs, perform better, and offer new useful features?  Enquiring minds want to know!
</p>

        </div>
            </article>
    <nav>
        <a href="/page/116">Newer Posts</a><br />
        <a href="/page/118">Older Posts</a><br />
    </nav>
                </div>
                <div class="span4 sidebar">
                    <div class="well">
                        <h4>@TheKeyboard <small>The ramblings of a grumpy programmer</small></h4>
                    </div>
                    <div class="well sidebar-nav">
                        <h4>Links</h4>
                        <ul class="nav">
                            <li><a href="http://sculpin.io">sculpin.io</a></li>
                            <li><a href="http://twitter.com/getsculpin">@getsculpin</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <footer class="container">
            &copy; 2014 @TheKeyboard
        </footer>

        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="/components/jquery/jquery.min.js"><\/script>')</script>
        <script src="/components/bootstrap/js/bootstrap.min.js"></script>
                
                <script src="/components/highlightjs/highlight.pack.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
    </body>
</html>
