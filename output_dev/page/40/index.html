<!DOCTYPE html>
<html>
    <head>
        <title>Home &mdash; @TheKeyboard &mdash; The ramblings of a grumpy programmer</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="/components/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
        <link href="/components/bootstrap/css/bootstrap-responsive.min.css" rel="stylesheet" type="text/css" />
        <link href="/css/style.css" rel="stylesheet" type="text/css" />
        <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
        <!--[if lt IE 9]>
            <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
        <link rel="stylesheet" href="/components/highlightjs/styles/github.css" />
        <link rel="alternate" type="application/atom+xml" href="/atom.xml" title="@TheKeyboard activity feed" />
        <style>
        /** quick fix because bootstrap <pre> has a background-color. */
        pre code { background-color: inherit; }
        </style>
    </head>
    <body>
        <header>
            <div class="navbar navbar-inverse navbar-fixed-top">
                <div class="navbar-inner">
                    <div class="container-fluid">
                        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </a>
                        <a class="brand" href="/">@TheKeyboard</a>
                        <div class="nav-collapse collapse">
                            <ul class="nav">
                                <li><a href="/blog">Posts Archive</a></li>
                                <li><a href="/blog/categories">Categories</a></li>
                                <li><a href="/blog/tags">Tags</a></li>
                                <li><a href="/about">About</a></li>
                            </ul>
                        </div><!--/.nav-collapse -->
                    </div>
                </div>
            </div>
        </header>
        <div class="mainContent container">
            <div class="row-fluid">
                <div class="span8">
                        <article>
        <header>
            <h2><a href="/_posts/2006-11-24-adventures-with-jquery.markdown"></a></h2>
        </header>
        <div>
            <hr />

<p>layout: post
title: Adventures with jQuery
date: 2006-11-24</p>

<h2>author: Chris Hartjes</h2>

<p>Man, I never realized that I could actually learn to enjoy Javascript.  It looks just like PHP or even <em>gasp</em> Ruby code to me at times. :)</p>

<p>For my <a target="_blank" href="http://www.mustique-island.com">current paid side project</a> I've been using <a target="_blank" href="http://www.jquery.com">jQuery</a> to do some cool transformational effects.  On the page that shows the details for a villa, there's a little section, sort of a sidebar, that has things like the number of rooms, price, etc.  Visitors are then allowed to share the information by sending an email.</p>

<p>So, being a guy who always wants to learn I said "Hell, lemme whip up some Ajax goodness so that we don't have to do any page refreshes."  Then I said "How the hell do I do that with jQuery any way."  Long story short,  I got it to work.  I'm finally getting the hang of this stuff.  How easy was it?  Lemme show you:</p>

<p>First, I put all the different divs that will be displayed into the main page. Perhaps this is sloppy, but I'm just a beginner at this.  I then went to the style sheet for that particular page and added in:</p>

<pre><code>#email {
    display: none;
}

#email_thankyou {
    display: none;
}
</code></pre>

<p>That made sure those two divs wouldn't show up until I turned them on.? Then, I created an href of the style <a xhref="javascript: foo();"> in a successful effort to avoid having the page scroll up to the top when they click on the link.? Then, we added in the following jQuery magic:</p>

<pre><code><br />function shareVilla() {

$("#details").hide("fast");

$("#email").fadeIn("slow"));

}

</code></pre>

<p>Man, I love helper functions that actually read like English.</p>

<p>So then I made sure to hack an existing form validation script to then use some Ajax and post the data to an external PHP script that will send the email.? Here's what I added in, again in jQuery style:</p>

<pre><code><br />$.post("foo.php",
{ send_to: document.res_form.send_to.value,
email: document.res_form.email.value,
from: document.res_form.from.value,
your_email_address: document.res_form.your_email_address.value,
textarea: document.res_form.textarea.value,
villa_description: document.res_form.villa_description.value,
villa_url: document.res_form.villa_url.value},
function(){
$("#email").hide("fast");
$("#email_thanks").fadeIn("slow");
});

</code></pre>

<p>Again, I find that code to be very readable which means I can actually go back to it later and figure out what it was doing. So, it works:? content fades in and out, data gets posted to an external script, so all that's left is to test to make sure that the emails actually do get sent out.</p>

<p>A tip of my hat to John Resig for creating a great, compact Javascript library.? Steal from the best, I always say.</a></p>

        </div>
            </article>
    <article>
        <header>
            <h2><a href="/_posts/2006-11-29-using-cakephps-native-web-service-support.markdown"></a></h2>
        </header>
        <div>
            <hr />

<p>layout: post
title: Using CakePHP's Native Web Service Support
author: Chris Hartjes</p>

<h2>date: 2006-11-29</h2>

<p>
Recently there was a posting on the <a href="http://cakephp.org">CakePHP</a> mailing list from someone complaining that CakePHP's native web service support didn't work, mainly because he couldn't figure out how to get it to work.  So, I took up the challenge and sent out an email to the list showing that you can indeed use them.  Might I add that until I tried this, I had never built a web service with CakePHP before.  I found that by turning on the debug mode and actually following the instructions that were in the error messages (best undocumented feature of CakePHP if you ask me) I was able to build it.  Oh yeah, a big shout-out to Samuel DeVore for his near-simultaneous reply to the original message showing an ever simpler example than mine.  Which I promptly stole and used it in this example. :)
</p>

<p>
This example works with the latest stable version of CakePHP (1.1.10.3825) running on a Gentoo Linux box with PHP 5.1.2 and Apache 2.  It's my understanding that the native web service stuff was originally built for Cake 1.2 (not released yet) and back-ported to Cake 1.1.  Perhaps some key parts are missing, hence the need for some hackery mentioned below.
</p>

<p>
First, open up /app/config/core.php and turn on support for internal web services:
~~~
/**
 *  The define below is used to turn cake built webservices
 *  on or off. Default setting is off.
 */
    define('WEBSERVICES', 'on');
~~~
</p>

<p>
Now, you have to understand that CakePHP won't magically spit out your content as XML, or SOAP, or as REST or whatever.  The internal web services support provides built-in URLs for spitting out your content in whatever alternate format you want.  This concept will become clear as we continue on here.  Basically it lets you do the following:
<ul>
<li>mydomain/controller/action for regular content</li>
<li>mydomain/xml/controller/action to spit out your content formatted as XML</li>
</ul>
</p>

<p>Okay, so first thing I did was create a test controller:
~~~
<?php

/**
 * Test controller for built-in web services
 *
 * @author Chris Hartjes
 *
 */
 
class TestController extends AppController
{
    var $name = 'Test';
    var $uses = "";
    var $components = array('xml');
    
    function index()
    {
        $message = "This is a test of built-in web services";
        $this->set('message', $message);
    }
}

?>
~~~
Those of you who are observant about CakePHP will notice that I've dragged in a component to be used.  Currently, you need to create a component *and* a helper to make the web service stuff work.  This is hackish, and hopefully goes away.
</p>

<p>
You need to create an XML component and put it in /app/controllers/components/xml.php
~~~
<?php

class XMLComponent extends Object
{
    // Blank for now as we're not doing anything weird
}

?>
~~~
and then create an XML helper, placing that in /app/views/helpers/xml.php
~~~
<?php

class XmlHelper extends Helper
{
    // blank for now
}

?>
~~~ 
</p>

<p>
Now we need to generate a bunch of thtml files to display our output.  Of course, we have to create the default view for our action in the controller.  Put this in /app/views/test/index.thtml
~~~
Content generated via regular view<br />
< ?php echo $message ?>
~~~
Next is the XML stuff.  There are two files we need to create.  One is /app/views/layouts/xml/default.thtml, which simply tells CakePHP to use whatever data is passed into it.
~~~
< ?php echo $content_for_layout ?>
~~~
and then we create /app/views/test/xml/index.thtml to spit out our data in XML
~~~
< ?php e('<?xml version="1.0" encoding="utf-8" ?>' . "\n"); ?>
<foo>
<bar>< ?php echo $message ?></bar>
</foo>
~~~
I believe the e(blah) function is a built-in helper for CakePHP.
</p>

<p>
So, now when we go to mydomain/test we get the following output generated:
~~~
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>CakePHP Web Services Test</title>
<link rel="stylesheet" type="text/css" href="/css/cake.generic.css" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /></head>
<body>
    <div id="container">
        <div id="content">
            Content generated via regular view<br />
This is a test of built-in web services     </div>

        <div id="footer">
            &nbsp;
        </div>
    </div>
    </body>
</html>
~~~
and when we go to mydomain/xml/test we get the following output generated
~~~
<?xml version="1.0" encoding="utf-8" ?>
<foo>
<bar>This is a test of built-in web services</bar>
</foo>
~~~
</p>

<p>
Like I said before, a lot of hoops to jump through and hopefully those go away when CakePHP 1.2 comes out.
</p>

        </div>
            </article>
    <article>
        <header>
            <h2><a href="/_posts/2006-12-05-rallyhatcom-baby-steps.markdown"></a></h2>
        </header>
        <div>
            <hr />

<p>layout: post</p>

<h2>title: Rallyhat.com -- baby steps</h2>

<p>
After a lengthy conversation with my programming friend who lives in the Philipines (can't wait to hook up with you again when you come back to Toronto) where we debated the merits of Ruby ("it's elegant, just feels right but is a lot slower than PHP") vs. PHP ("build it with PHP and you're stuck in the htdocs directory") I took the first baby steps and created the shell of the application in Rails with a simple 'rails rallyhat.com' in a shell.
</p>

<p>
The next step is to get it into version control and experiment with using Capistrano to push it from my laptop onto a testing server.  That will make for an interesting blog post I think.
</p>

        </div>
            </article>
    <nav>
        <a href="/page/39">Newer Posts</a><br />
        <a href="/page/41">Older Posts</a><br />
    </nav>
                </div>
                <div class="span4 sidebar">
                    <div class="well">
                        <h4>@TheKeyboard <small>The ramblings of a grumpy programmer</small></h4>
                    </div>
                    <div class="well sidebar-nav">
                        <h4>Links</h4>
                        <ul class="nav">
                            <li><a href="http://sculpin.io">sculpin.io</a></li>
                            <li><a href="http://twitter.com/getsculpin">@getsculpin</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <footer class="container">
            &copy; 2014 @TheKeyboard
        </footer>

        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="/components/jquery/jquery.min.js"><\/script>')</script>
        <script src="/components/bootstrap/js/bootstrap.min.js"></script>
                
                <script src="/components/highlightjs/highlight.pack.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
    </body>
</html>
