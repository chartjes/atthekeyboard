<!DOCTYPE html>
<html>
    <head>
        <title>Home &mdash; @TheKeyboard &mdash; The ramblings of a grumpy programmer</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="/components/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
        <link href="/components/bootstrap/css/bootstrap-responsive.min.css" rel="stylesheet" type="text/css" />
        <link href="/css/style.css" rel="stylesheet" type="text/css" />
        <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
        <!--[if lt IE 9]>
            <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
        <link rel="stylesheet" href="/components/highlightjs/styles/github.css" />
        <link rel="alternate" type="application/atom+xml" href="/atom.xml" title="@TheKeyboard activity feed" />
        <style>
        /** quick fix because bootstrap <pre> has a background-color. */
        pre code { background-color: inherit; }
        </style>
    </head>
    <body>
        <header>
            <div class="navbar navbar-inverse navbar-fixed-top">
                <div class="navbar-inner">
                    <div class="container-fluid">
                        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </a>
                        <a class="brand" href="/">@TheKeyboard</a>
                        <div class="nav-collapse collapse">
                            <ul class="nav">
                                <li><a href="/blog">Posts Archive</a></li>
                                <li><a href="/blog/categories">Categories</a></li>
                                <li><a href="/blog/tags">Tags</a></li>
                                <li><a href="/about">About</a></li>
                            </ul>
                        </div><!--/.nav-collapse -->
                    </div>
                </div>
            </div>
        </header>
        <div class="mainContent container">
            <div class="row-fluid">
                <div class="span8">
                        <article>
        <header>
            <h2><a href="/_posts/2007-09-21-deploying-cakephp-applications-using-capistrano.markdown"></a></h2>
        </header>
        <div>
            <hr />

<p>layout: post</p>

<h2>title: Deploying CakePHP Applications Using Capistrano</h2>

<p>There was a question on the <a href="http://groups.google.com/group/cake-php/">CakePHP mailing list</a> where somebody was asking about deploying CakePHP apps using <a href="http://www.capify.org/">Capistrano</a>.  What is Capistrano?  From the web site:
<blockquote>
Simply put, Capistrano is a tool for automating tasks on one or more remote servers. It executes commands in parallel on all targeted machines, and provides a mechanism for rolling back changes across multiple machines. It is ideal for anyone doing any kind of system administration, either professionally or incidentally.
</blockquote>
Sounds like exactly the type of thing a lazy programmer like myself needs.
</p>

<p>
In a nutshell, here's what you do:  you create a file that contains instructions on what tasks you need to run on your remote server, then you get Capistrano to load the file and execute the tasks you've defined.  In the past, Capistrano was pretty tightly integrated with Rails, but with version 2.0 I found I didn't need to have a Rails app installed *anywhere*, which is good news for anyone wishing to use this amazing tool with other web applications.
</p>

<p>First thing I did was go and <a href="http://www.capify.org/install">install Capistrano</a>.  Relatively easy, but I had to install the Ruby gems system on my MacBook, something that was easy to do.  Once I had that installed, I then grabbed a <a href="http://simplisticcomplexity.com/assets/2006/9/21/deploy.rb">sample deploy.rb file</a>, and hacked away at it until I got  something very basic that would work for my situation (with names changed to protect the innocent):</p>

<pre>
set :application, "yourapp"
set :repository, "svn://location.ofrepo.com"
role :web, "server.domain.com:
set :deploy_to, "/cakeapp/:
set :checkout, "export"

desc "This will deploy the app"
task :deploy do
     run "svn --quiet --force #{checkout} #{repository} #{deploy_to}"
end
</pre>

<p>That sure looks simple, doesn't it?</p>

<p>In the spirit of convention over configuration, Capistrano has a few defaults.  It assumes you're using SSH to connect to the remote server.  It also assumes that you are using Subversion as your version control system.  "But you're accessing svn directly!" I can hear you saying.  Yes, but that's because I'm lazy and wanted to get the thing working as soon as possible.</p>

<p>
I then saved the file in the config/ directory of my Cake app.  Why?  Seemed like a good place to put it.  Then, when I'm ready to deploy the changes I've made, here's what happens.  I tend to place my cake root outside of the web root so that I can have multiple Cake apps running off the same library.  ~/src/www.ibl.org is the app/ directory if you look at it that way.
<pre>
cupcake:~/src/www.ibl.org chartjes$ cap -f config/deploy.rb deploy
  * executing `deploy'
  * executing "svn --quiet --force export svn://server.littlehart.net/www.ibl.org/trunk /home/wwwroot/www.ibl.org/public/app/"
    servers: ["phantasm.ibl.org"]
Password: 
    [phantasm.ibl.org] executing command
    command finished
cupcake:~/src/www.ibl.org chartjes$ 
</pre>
That's it!  Now, when I finish my local development and check my changes into my repository I can deploy them to production via the command line.  For more advanced deployment schemes I suggest you checkout <a href="http://www.capify.org/">the main Capistrano site</a> and as always, Google is your friend.
</p>

        </div>
            </article>
    <article>
        <header>
            <h2><a href="/_posts/2007-09-25-rails-fan-boys-missed-the-point.markdown"></a></h2>
        </header>
        <div>
            <hr />

<p>layout: post</p>

<h2>title: Rails Fan Boys Missed The Point</h2>

<p>I'm sure I'm not the only person who has been talking about this, but the response to Derek Sivers talking about <a href="http://www.oreillynet.com/ruby/blog/2007/09/7_reasons_i_switched_back_to_p_1.html">how he switched back to PHP</a> after 2 years of trying to rewrite <a href="http://cdbaby.com">CD Baby</a> using Rails has been so predicatably idiotic. He even hired a Rails expert to help him out.  Not what I would've done, but whatever.  So, he had the courage at some point to pull the plug on it and got down to work rewriting his app in PHP.  2 months and 10K lines of code later, he was done.  2 years vs. 2 months.
</p>

<p>
Now, other people have done a much better job of deconstructing the childish, immature responses that basically seem to imply that Mr. Sivers' is an idiot (which he clearly is not) and that Rails is perfect and that he must be doing something wrong.  But that's not what I'm here to discuss today. His experience is not atypical in the software industry.  Many have been seduced by the promise of a new tool and have failed to anticipate that some of the same problems they were hoping to fix were going to show up no matter how hard they tried.  And woe unto anyone who chooses to criticize that technology, as they will be flamed mercilessly for not accepting that the new is better than the old.</p>

<p>
Anyway, the guy I feel bad for is the Rails expert Mr. Sivers' hired.  He was being asked to shoehorn an existing application into not only a new language but probably a new paradigm.  Was the old CD Baby a prime candidate for a rework using a framework that relies heavily upon convention over configuration in order to gain development time?  Legacy apps are very hard to rewrite when you didn't create the original.  Sure, Mr. Sivers was helping the Rails guy out but there was no way he (the Rails guy) could get this done.  Mr. Sivers just knew way too much about all the hackery that inevitably creeps into an app to get it to work and no amount of time could get that info out of his head and into a form that Rails Guy could use.
</p>

<p>
Of *course* Mr. Sivers could rewrite this thing in 2 months.  He knew all the intimate details.  How could he *not* succeed?  He had thrown away 2 years worth of work but was able to get it done in 2 months by himself.  All he really had to do was go back and recognize the mistakes he had made and what was the simplest way to implement the functionality <i>he had already written before</i>.  But here's the kicker:  he knew how do it better BECAUSE of what he learned while doing Rails.</p>

<p>
As I told my friend <a href="http://lazyweb.ca">Kevin</a>, the end result of all my talks on "What can PHP learn from Ruby on Rails" was me being able to stand up and say "there is nothing I can't build in PHP that I can build in Rails, but thanks for showing me all those best practices."  That, my Rails fan boys, is the real lesson to be learned.  Keep all that "PHP is ugly, Ruby is beautiful" nonsense to yourself and just build something with it.  I'll be humming along building PHP sites using all those cool things I learned from Rails.  You want to use Rails?  Great!  I'll be here working on my PHP stuff, let me know when you run into an application-level problem Rails can't solve because I'm willing to bet it's been solved with PHP.  Numerous times.
</p>

        </div>
            </article>
    <article>
        <header>
            <h2><a href="/_posts/2007-10-02-things-will-be-quiet.markdown"></a></h2>
        </header>
        <div>
            <hr />

<p>layout: post</p>

<h2>title: Things Will Be Quiet...</h2>

<p>Thinks will be quiet for a while around here as I need to back up my blog and other stuff in order to make way for an upgrade to my <a href="http://www.veggiehost.com">VPS</a> due to a busted Gentoo configuration.  My emerge binary seems to have disappeared and the tech gurus there say a full reinstall is the way to go.  Not sure when I'll get around to the backup, so I'll see ya on the other side...</p>

        </div>
            </article>
    <nav>
        <a href="/page/66">Newer Posts</a><br />
        <a href="/page/68">Older Posts</a><br />
    </nav>
                </div>
                <div class="span4 sidebar">
                    <div class="well">
                        <h4>@TheKeyboard <small>The ramblings of a grumpy programmer</small></h4>
                    </div>
                    <div class="well sidebar-nav">
                        <h4>Links</h4>
                        <ul class="nav">
                            <li><a href="http://sculpin.io">sculpin.io</a></li>
                            <li><a href="http://twitter.com/getsculpin">@getsculpin</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <footer class="container">
            &copy; 2014 @TheKeyboard
        </footer>

        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="/components/jquery/jquery.min.js"><\/script>')</script>
        <script src="/components/bootstrap/js/bootstrap.min.js"></script>
                
                <script src="/components/highlightjs/highlight.pack.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
    </body>
</html>
