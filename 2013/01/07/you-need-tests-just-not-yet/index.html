<!DOCTYPE html>
<html>
    <head>
        <title>You need tests...just not yet &mdash; @TheKeyboard &mdash; The ramblings of a grumpy programmer</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="/components/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
        <link href="/components/bootstrap/css/bootstrap-responsive.min.css" rel="stylesheet" type="text/css" />
        <link href="/css/style.css" rel="stylesheet" type="text/css" />
        <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
        <!--[if lt IE 9]>
            <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
        <link rel="stylesheet" href="/components/highlightjs/styles/github.css" />
        <link rel="alternate" type="application/atom+xml" href="/atom.xml" title="@TheKeyboard activity feed" />
        <link href="https://vjs.zencdn.net/5.5.3/video-js.css" rel="stylesheet">
        <script src="https://vjs.zencdn.net/ie8/1.1.1/videojs-ie8.min.js"></script>
        <style>
        /** quick fix because bootstrap <pre> has a background-color. */
        pre code { background-color: inherit; }
        </style>
    </head>
    <body>
        <header>
            <div class="navbar navbar-inverse navbar-fixed-top">
                <div class="navbar-inner">
                    <div class="container-fluid">
                        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </a>
                        <a class="brand" href="/">@TheKeyboard</a>
                        <div class="nav-collapse collapse">
                            <ul class="nav">
                                <li><a href="/blog">Posts Archive</a></li>
                                <li><a href="/about">About</a></li>
                                <li><a href="/atom.xml">RSS/Atom</a></li>
                            </ul>
                        </div><!--/.nav-collapse -->
                    </div>
                </div>
            </div>
        </header>
        <div class="mainContent container">
            <div class="row-fluid">
                <div class="span8">
                        <article>
        <header>
            <h2>You need tests...just not yet <small>post</small></h2>
            <h3>January 7th, 2013</h3>
        </header>
        <div>
            <p>Every once in a while I come across a blog post or a presentation that helps
me figure out something that has been bothering but I was having problems
articulating. Lately I've been struggling to come up with strategies to help
developers figure out when they should REALLY be writing tests for their code.</p>

<p>If you believe in the power of TDD, then the answer is "you write tests from
the beginning of the project and forever after." I am a believer that TDD can
be a very powerful design tool for building things at the unit / module / component
level.</p>

<p>Then some people asked me my thoughts on the comments by the creator of the
Rails project about the usefulness of dependency injection. As happens when
I am feeling frustrated, I started firing out the tweets on my feelings on
testing and the lonely Crusade that I am on.</p>

<p>Then I saw a talk by Dan North called <a href="http://www.infoq.com/presentations/Decisions-Decisions">"Decisions, Decisions"</a> at the recommendation of <a href="https://twitter.com/ianbarber">Ian Barber</a> that made me realize that someone else has articulated my feelings on
when you should be doing testing. Slides for the presentation can be found
<a href="http://qconlondon.com/dl/qcon-london-2012/slides/DanNorth_DecisionsDecisions.pdf">here</a>.</p>

<p>You should watch the whole presentation. So many decisions about programming
are made without understanding, REALLY understanding the trade-offs involved
when making one decision vs. another.</p>

<p>Let's look at TDD vs. Test whenever. The trade-off being made here is not
about quality of code or guarding against regressions. It's about opportunity cost.
This had occurred to me but I had dismissed it as being "anti-testing".</p>

<p>But I think I was wrong, and here's why.</p>

<p>In that awesome presentation he talks about "patterns" he observed on the team
he was working with at the time. He was amazed at how much work this team was
getting done, so he spent time analyzing what they were doing and trying to
turn some of their activities into patterns of behaviour. Repeatable processes
are good, right?</p>

<p>The one that he saw being related to writing was a pattern he called "Spike
and Stabilize." Basically, you write code without any tests until it becomes
a solid part of your application's architecture. Once this code has proven
it's usefulness, you start writing comprehensive tests in order to verify
that it is in fact doing the job and doesn't break going forward.</p>

<p>This is so obvious to me now. Clearly, you are leaving yourself open to the
potential of writing not just application code but testing code that gets
tossed away if the idea you are implementing is unable to prove it's value.</p>

<p>Opportunity cost is huge and often dismissed by developers too. If you have
some prototype code, or even functionality with a half-life measured
in 3-month-increments, what else could be worked on while tests for this
code are being written?</p>

<p>Could this hybrid approach be an easier sell to skeptical managers or
other stakeholders? That's hard to say. The "too busy to write tests"
camp still has many members, and is still seems that it takes catastrophic
failures before many people join the Testing Crusade.</p>

<p>To be perfectly clear: I find great value in prototyping code and then
committing to tests once the prototype is ready to move to a more stable
environment.</p>

<p>I try and do prototyping before I commit to writing code, because I often
feel that way. My prototypes are usually command-line scripts that try
and accomplish the task I've been assigned. That way, it's easier to
actually write some tests once I know what I'm doing and guard against
regressions later.</p>

<p>The key to all this is being able to identify at what stage in this particular
pattern your code is at. Is it still a spike, meaning you are working out
implementation details and trying to figure out if it will even have the
desired result? Or is it stable, providing solid value to the application 
as a whole and ready to be wrapped in tests to protect against regressions?</p>

<p>Next time you are thinking about "I need some tests for this", consider the
Spike and Stabilize pattern. The answer might be "you need tests...but not yet."</p>

        </div>
                
                    <nav class="article">
                <ul>
                                            <li>Next: <a class="next" href="/2013/01/11/one-year-of-grumpy-testing/" title="One year of Grumpy Testing"><span class="title">One year of Grumpy Testing</span></a></li>
                                                                <li>Previous: <a class="previous" href="/2012/12/31/2012-review/" title="2012 Review"><span class="title">2012 Review</span></a></li>
                                    </ul>
            </nav>
            </article>
                </div>
                <div class="span4 sidebar">
                    <div class="well">
                        <h4>@TheKeyboard <small>The ramblings of a grumpy programmer</small></h4>
                    </div>
                    <div class="well sidebar-nav">
                        <section>
                            <h3>Find stuff</h3>
                            <script>
                              (function() {
                                var cx = '010269902375244482518:ddxhg1qhod4';
                                var gcse = document.createElement('script');
                                gcse.type = 'text/javascript';
                                gcse.async = true;
                                gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
                                    '//www.google.com/cse/cse.js?cx=' + cx;
                                var s = document.getElementsByTagName('script')[0];
                                s.parentNode.insertBefore(gcse, s);
                              })();
                            </script>
                            <gcse:searchbox-only></gcse:searchbox-only>
                        </section>
                        <section>
                            <h3>Contact me</h3>
                            <ul>
                                <li>Email me at chartjes@grumpy-learning.com</li>
                                <li>Find me on Twitter as <a href="https://twitter.com/grmpyprogrammer">@grmpyprogrammer</a></li>
                            </ul>
                        </section>
			<section>
				<h3>Sponsor me</h3>
				<p>If you like the work I do on <a href="https://github.com/opencfp/opencfp/">OpenCFP</a> you can become a
				sponsor via my <a href="https://github.com/sponsors/chartjes">GitHub sponsors</a> page. Your sponsorship
				allows me to spend more time on open source and less time writing books and training material.</p>
			</section>
                        <section>
                            <h3>Books</h3>
                            <ul>
				<li><a href="https://leanpub.com/grumpy-guide">The Grumpy Programmer's Guide To Testing PHP Applications (currently pre-ordering)</a></li>
                                <li><a href="https://leanpub.com/test-driven">Building Test-Driven Developers</a></li>
                                <li><a href="https://leanpub.com/minimumviabletests">Minimum Viable Tests</a></li>
                                <li><a href="https://leanpub.com/grumpy-phpunit">The Grumpy Programmer's PHPUnit Cookbook</a></li>
                            </ul>
                        </section>
                    </div>
                </div>
            </div>
        </div>
        <footer class="container">
            &copy; 2020 @TheKeyboard
        </footer>

        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="/components/jquery/jquery.min.js"><\/script>')</script>
        <script src="/components/bootstrap/js/bootstrap.min.js"></script>
                
                <script src="/components/highlightjs/highlight.pack.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
    </body>
</html>
