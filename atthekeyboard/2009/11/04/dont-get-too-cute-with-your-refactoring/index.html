<!DOCTYPE html>
<html>
    <head>
        <title>Don&#039;t Get Too Cute With Your Refactoring &mdash; @TheKeyboard &mdash; The ramblings of a grumpy programmer</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="/components/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
        <link href="/components/bootstrap/css/bootstrap-responsive.min.css" rel="stylesheet" type="text/css" />
        <link href="/css/style.css" rel="stylesheet" type="text/css" />
        <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
        <!--[if lt IE 9]>
            <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
        <link rel="stylesheet" href="/components/highlightjs/styles/github.css" />
        <link rel="alternate" type="application/atom+xml" href="/atom.xml" title="@TheKeyboard activity feed" />
        <link href="https://vjs.zencdn.net/5.5.3/video-js.css" rel="stylesheet">
        <script src="https://vjs.zencdn.net/ie8/1.1.1/videojs-ie8.min.js"></script>
        <style>
        /** quick fix because bootstrap <pre> has a background-color. */
        pre code { background-color: inherit; }
        </style>
    </head>
    <body>
        <header>
            <div class="navbar navbar-inverse navbar-fixed-top">
                <div class="navbar-inner">
                    <div class="container-fluid">
                        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </a>
                        <a class="brand" href="/">@TheKeyboard</a>
                        <div class="nav-collapse collapse">
                            <ul class="nav">
                                <li><a href="/blog">Posts Archive</a></li>
                                <li><a href="/about">About</a></li>
                                <li><a href="/atom.xml">RSS/Atom</a></li>
                            </ul>
                        </div><!--/.nav-collapse -->
                    </div>
                </div>
            </div>
        </header>
        <div class="mainContent container">
            <div class="row-fluid">
                <div class="span8">
                        <article>
        <header>
            <h2>Don&#039;t Get Too Cute With Your Refactoring <small>post</small></h2>
            <h3>November 4th, 2009</h3>
        </header>
        <div>
            <p>For those who follow me on Twitter, I'm pretty sure it was obvious I was having a very rough day today.  I'm in the process of making some pretty invasive changes to an application and work, and I approached it with much trepidation because of an extreme lack of tests.  I managed to get part one of these changes done, and refactored some stuff to get away from constantly passing parameters around like messages.  Instead I decided to place these values inside class variables.  Chortling to myself at how much better it was than passing the same values around all the time, I wrote some unit tests and all systems were green.  Awesome.</p>

<p>
Then I noticed the application itself didn't work properly now.  "How can this be, o seasoned veteran of 12+ years of web application experience?!?!" I can hear you saying.  Alas, forgive me for I have committed the sin of being too cute with my refactoring.
</p>

<p>
Well, actually, the problem is that I did not write enough tests to cover the code I was refactoring and simply <a href="http://en.wikipedia.org/wiki/Cowboy_coding">cowboy coded</a> my way through it today to get it to work.  Well, it's *sort* of working and there are many refactorings still to do.  But for sure I have to step back and examine my test coverage to make sure I am testing EVERYTHING I'm fixing.  The mistakes I made were SO obvious once I took the time to trace what I call the "call flow", which is tracking what gets executed and in what order.  If I had written tests for everything I encountered in this "call flow" I think I would've been a lot better off, instead of yelling obscenities targeted at myself while trying to figure it out.
</p>

<p>
Looking back at my choices in refactoring, well, I could've gone either way:  passing messages around in the form of parameters is a pretty safe way of doing things, but I'm determined to cut things down to the least amount of code possible while still achieving the desired results.  I'm not talking about non-intuitive code hacks, or using trinary expressions whenever possible.  If I'm using objects, I might as well use class variables to store values that need to persist throughout the request. 
</p>

<p>
So when I fire up <a href="http://www.vim.org">the one-true editor</a> tomorrow morning to keep going, I will say to myself out loud "don't get too cute with your refactoring, Chris.".  Oh yeah, and I'll make sure to write my tests as I go along.
</p>

        </div>
                
                    <nav class="article">
                <ul>
                                            <li>Next: <a class="next" href="/atthekeyboard/2009/11/05/next-gen-work-projects/" title="Next-Gen Work Projects"><span class="title">Next-Gen Work Projects</span></a></li>
                                                                <li>Previous: <a class="previous" href="/atthekeyboard/2009/11/03/why-i-love-stack-overflow/" title="Why I Love Stack Overflow"><span class="title">Why I Love Stack Overflow</span></a></li>
                                    </ul>
            </nav>
            </article>
                </div>
                <div class="span4 sidebar">
                    <div class="well">
                        <h4>@TheKeyboard <small>The ramblings of a grumpy programmer</small></h4>
                    </div>
                    <div class="well sidebar-nav">
                        <section>
                            <h3>Find stuff</h3>
                            <script>
                              (function() {
                                var cx = '010269902375244482518:ddxhg1qhod4';
                                var gcse = document.createElement('script');
                                gcse.type = 'text/javascript';
                                gcse.async = true;
                                gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
                                    '//www.google.com/cse/cse.js?cx=' + cx;
                                var s = document.getElementsByTagName('script')[0];
                                s.parentNode.insertBefore(gcse, s);
                              })();
                            </script>
                            <gcse:searchbox-only></gcse:searchbox-only>
                        </section>
                        <section>
                            <h3>Contact me</h3>
                            <ul>
                                <li>Email me at chartjes@grumpy-learning.com</li>
                                <li>Find me on Twitter as <a href="https://twitter.com/grmpyprogrammer">@grmpyprogrammer</a></li>
                            </ul>
                        </section>
			<section>
				<h3>Sponsor me</h3>
				<p>If you like the work I do on <a href="https://github.com/opencfp/opencfp/">OpenCFP</a> you can become a
				sponsor via my <a href="https://github.com/sponsors/chartjes">GitHub sponsors</a> page. Your sponsorship
				allows me to spend more time on open source and less time writing books and training material.</p>
			</section>
                        <section>
                            <h3>Books</h3>
                            <ul>
				<li><a href="https://leanpub.com/grumpy-guide">The Grumpy Programmer's Guide To Testing PHP Applications (currently pre-ordering)</a></li>
                                <li><a href="https://leanpub.com/test-driven">Building Test-Driven Developers</a></li>
                                <li><a href="https://leanpub.com/minimumviabletests">Minimum Viable Tests</a></li>
                                <li><a href="https://leanpub.com/grumpy-phpunit">The Grumpy Programmer's PHPUnit Cookbook</a></li>
                            </ul>
                        </section>
                    </div>
                </div>
            </div>
        </div>
        <footer class="container">
            &copy; 2020 @TheKeyboard
        </footer>

        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="/components/jquery/jquery.min.js"><\/script>')</script>
        <script src="/components/bootstrap/js/bootstrap.min.js"></script>
                
                <script src="/components/highlightjs/highlight.pack.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
    </body>
</html>
