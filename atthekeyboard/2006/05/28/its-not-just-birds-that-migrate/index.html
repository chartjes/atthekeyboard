<!DOCTYPE html>
<html>
    <head>
        <title>It&#039;s Not Just Birds That Migrate &mdash; @TheKeyboard &mdash; The ramblings of a grumpy programmer</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="/components/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
        <link href="/components/bootstrap/css/bootstrap-responsive.min.css" rel="stylesheet" type="text/css" />
        <link href="/css/style.css" rel="stylesheet" type="text/css" />
        <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
        <!--[if lt IE 9]>
            <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
        <link rel="stylesheet" href="/components/highlightjs/styles/github.css" />
        <link rel="alternate" type="application/atom+xml" href="/atom.xml" title="@TheKeyboard activity feed" />
        <link href="https://vjs.zencdn.net/5.5.3/video-js.css" rel="stylesheet">
        <script src="https://vjs.zencdn.net/ie8/1.1.1/videojs-ie8.min.js"></script>
        <style>
        /** quick fix because bootstrap <pre> has a background-color. */
        pre code { background-color: inherit; }
        </style>
    </head>
    <body>
        <header>
            <div class="navbar navbar-inverse navbar-fixed-top">
                <div class="navbar-inner">
                    <div class="container-fluid">
                        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </a>
                        <a class="brand" href="/">@TheKeyboard</a>
                        <div class="nav-collapse collapse">
                            <ul class="nav">
                                <li><a href="/blog">Posts Archive</a></li>
                                <li><a href="/about">About</a></li>
                                <li><a href="/atom.xml">RSS/Atom</a></li>
                            </ul>
                        </div><!--/.nav-collapse -->
                    </div>
                </div>
            </div>
        </header>
        <div class="mainContent container">
            <div class="row-fluid">
                <div class="span8">
                        <article>
        <header>
            <h2>It&#039;s Not Just Birds That Migrate <small>post</small></h2>
            <h3>May 28th, 2006</h3>
        </header>
        <div>
            <p>One of the cooler features of <a href="http://www.rubyonrails.com">Ruby on Rails</a> is it's support for a concept that they call database migrations.  In a nutshell you can create Ruby code that will generate tables and insert data into them.  Why is this a good idea?  It's also database agnostic, so it doesn't matter what database server you're running:  your database changes just work.</p>

<p>For the <a href="http://www.ibl.org">baseball league web site</a> I'm running <a href="http://www.typosphere.org">Typo</a>, which I've hacked and extended for the things that I need that aren't part of the weblog engine.  It also supports migrations.  Whenever I create a new model (a representation of a table in a database that I need to work with) it also created a migration file.  Which is cool, but not totally necessary for the league site as it's not being deployed in multiple places.</p>

<p>Now, I'm also running the trunk version of Typo, meaning I updated it directly from the <a href="http://subversion.tigris.org">Subversion</a> repository it's hosted in.  When I did an upgrade of the site on Friday afternoon, it also grabbed some migrations as well.  Except those migrations conflicted with ones I had already created when I created all sorts of model code.  The result:  a crashing web site.</p>

<p>Arrrgh!  I panicked for a minute.  Then I hit Google trying to find a solution.  After about half-an-hour of looking I finally found a solution.  Turns out there is a table in the Rails structure that keeps track of what migration you're currently up to (schema_info for those who want to look into it).  I updated that to point to the migration BEFORE I accidentally started adding in my own.</p>

<p>Okay, so I executed a 'rake migrate' command...and still nothing.  Site still complaining that it couldn't find a table...that the migration is supposed to create.  More panicking.  Another deep breath and more searching on Google.  I finally found an example of how to manually run a migration script.  I did that for the first migration and then everything else went okay.  Phew</p>

<p>I think so many sites would just crash and die if it wasn't for Google.  I guess it's a vicious circle:  solutions to problems available in Google lead to more and more sites making it through tricky points which leads to more people looking for solutions.</p>

<p>So everything is just fine now.  The latest addition to the site is a stats module.  There appear to be some problems in the stats themselves (one series entered twice from the looks of it, which isn't supposed to be possible) but I'll get that sorted out.</p>

        </div>
                
                    <nav class="article">
                <ul>
                                            <li>Next: <a class="next" href="/atthekeyboard/2006/05/31/odds-and-ends/" title="Odds and Ends"><span class="title">Odds and Ends</span></a></li>
                                                                <li>Previous: <a class="previous" href="/atthekeyboard/2006/05/26/im-a-php-plumber/" title="I&#039;m A PHP Plumber"><span class="title">I&#039;m A PHP Plumber</span></a></li>
                                    </ul>
            </nav>
            </article>
                </div>
                <div class="span4 sidebar">
                    <div class="well">
                        <h4>@TheKeyboard <small>The ramblings of a grumpy programmer</small></h4>
                    </div>
                    <div class="well sidebar-nav">
                        <section>
                            <h3>Find stuff</h3>
                            <script>
                              (function() {
                                var cx = '010269902375244482518:ddxhg1qhod4';
                                var gcse = document.createElement('script');
                                gcse.type = 'text/javascript';
                                gcse.async = true;
                                gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
                                    '//www.google.com/cse/cse.js?cx=' + cx;
                                var s = document.getElementsByTagName('script')[0];
                                s.parentNode.insertBefore(gcse, s);
                              })();
                            </script>
                            <gcse:searchbox-only></gcse:searchbox-only>
                        </section>
                        <section>
                            <h3>Contact me</h3>
                            <ul>
                                <li>Email me at chartjes@grumpy-learning.com</li>
                                <li>Find me on Twitter as <a href="https://twitter.com/grmpyprogrammer">@grmpyprogrammer</a></li>
                            </ul>
                        </section>
			<section>
				<h3>Sponsor me</h3>
				<p>If you like the work I do on <a href="https://github.com/opencfp/opencfp/">OpenCFP</a> you can become a
				sponsor via my <a href="https://github.com/sponsors/chartjes">GitHub sponsors</a> page. Your sponsorship
				allows me to spend more time on open source and less time writing books and training material.</p>
			</section>
                        <section>
                            <h3>Books</h3>
                            <ul>
				<li><a href="https://leanpub.com/grumpy-guide">The Grumpy Programmer's Guide To Testing PHP Applications (currently pre-ordering)</a></li>
                                <li><a href="https://leanpub.com/test-driven">Building Test-Driven Developers</a></li>
                                <li><a href="https://leanpub.com/minimumviabletests">Minimum Viable Tests</a></li>
                                <li><a href="https://leanpub.com/grumpy-phpunit">The Grumpy Programmer's PHPUnit Cookbook</a></li>
                            </ul>
                        </section>
                    </div>
                </div>
            </div>
        </div>
        <footer class="container">
            &copy; 2020 @TheKeyboard
        </footer>

        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="/components/jquery/jquery.min.js"><\/script>')</script>
        <script src="/components/bootstrap/js/bootstrap.min.js"></script>
                
                <script src="/components/highlightjs/highlight.pack.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
    </body>
</html>
